(this["webpackJsonpref-data-management"]=this["webpackJsonpref-data-management"]||[]).push([[0],{123:function(e,t,a){e.exports=a(204)},132:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"sets",(function(){return Ie})),a.d(r,"maps",(function(){return Oe})),a.d(r,"map_of_sets",(function(){return je})),a.d(r,"tables",(function(){return _e})),a.d(r,"setAddItem",(function(){return Ae})),a.d(r,"setBulkAddItems",(function(){return Ce})),a.d(r,"setImportItems",(function(){return De})),a.d(r,"mapAddItem",(function(){return Te})),a.d(r,"mapBulkAddItems",(function(){return Le})),a.d(r,"mapImportItems",(function(){return Me})),a.d(r,"map_of_setsAddItem",(function(){return Ne})),a.d(r,"map_of_setsAddInnerItem",(function(){return Re})),a.d(r,"map_of_setsImportItems",(function(){return Ve})),a.d(r,"map_of_setsBulkAddItems",(function(){return Ke})),a.d(r,"tableAddItem",(function(){return Fe})),a.d(r,"tableAddInnerItem",(function(){return Pe})),a.d(r,"tableImportItems",(function(){return Be})),a.d(r,"tableBulkAddItems",(function(){return ze}));var n=a(0),s=a.n(n),l=a(48),i=a.n(l),o=a(16),u=a(3),c=a.n(u),p=a(6),d=a(19),h=a(9),f=a(10),y=a(11),m=a(8),v=a(7),b=a(12),k=a(225),g=a(226),x=a(110),E=a.n(x),w=(a(131),a(132),a(213)),S=a(205),I=a(214),O=a(206),j=a(215),_=a(216),A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(m.a)(t).call(this,e))).state={searchText:""},a.toggleMenu=a.toggleMenu.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.matchSearch=a.matchSearch.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"toggleMenu",value:function(e){var t=this.props.refData;t[e].isOpen=!t[e].isOpen,this.setState({entries:t})}},{key:"matchSearch",value:function(e){var t=this.state.searchText;try{var a=new RegExp(t,"i");return e.match(a)}catch(r){return e.toLowerCase().includes(t.toLowerCase())}}},{key:"handleChange",value:function(e){var t=this;Object.keys(this.props.refData).map((function(e){return t.props.refData[e].isOpen=!0})),this.setState({searchText:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"menu"},s.a.createElement(w.a,{type:"text",labelText:"Search",placeHolderText:"Search",light:!0,onChange:this.handleChange,value:this.state.searchText}),s.a.createElement(S.a,null,Object.keys(this.props.refData).map((function(t){return s.a.createElement(I.a,{key:t,open:e.props.refData[t].isOpen,title:e.props.refData[t].label,className:"menu-title",onClick:function(){return e.toggleMenu(t)}},s.a.createElement(O.a,{kind:"primary",size:"small",onClick:function(a){return e.props.createEntry(a,t)},key:"btn-"+t},"Create New"),s.a.createElement(j.a,{className:"menu-list"},Object.keys(e.props.refData[t].nodes).map((function(a){if(!e.matchSearch(a))return s.a.createElement(s.a.Fragment,null);var r=e.props.refData[t].nodes[a];return s.a.createElement(O.a,{kind:"ghost",size:"small",key:r.label,className:"menu-entry",onClick:function(t){return e.props.menuItemAction(t,r)}},r.label,s.a.createElement(_.a,{type:"cool-gray",className:"menu-entry-badge"},r.size||"0"))}))))}))))}}]),t}(n.Component),C=a(57),D=a(111),T=a.n(D),L=a(35),M=a(112),N=a.n(M),R={apiRoot:"/api",refDataApi:"/reference_data/",rulesApi:"analytics/",ruleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=edit&appName=qradar&pageId=rulewizard&ruleId=",newRuleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=new&appName=qradar&pageId=rulewizard&type=",rulesSummary:"/console/do/rulewizard/maintainRules?dispatch=getAllRules&appName=qradar&pageId=RulesWizardExistingRules&summary=true",cepsSummary:"/console/do/core/genericsearchlist?appName=qradar&pageId=ArielPropertiesList",logSourcesSummary:"/console/do/core/genericsearchlist?appName=eventviewer&pageId=SensorDeviceList",aqlSearch:"/console/qradar/jsp/ArielSearchWrapper.jsp?"+encodeURI("url=do/ariel/arielSearch?"),aqlSearchDefaults:encodeURIComponent("appName=EventViewer&pageId=EventList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),aqlSearchDefaultsFlow:encodeURIComponent("appName=Surveillance&pageId=FlowList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),cepSearch:"/console/do/qradar/arielProperties?",cepSearchDefaults:"appName=qradar&pageId=ArielPropertiesList&dispatch=edit&id=",popupSettings:"status=yes,scrollbars=yes,resizable=yes,",axiosHeaders:{"Content-Type":"text/plain",Version:"10.1"},colors:{cepForce:"#0530ad",cep:"#0062ff",lst:"#054719",bb:"#da1e28",rule:"#750e13",font:"white",fontDisabled:"lightgray",edge:"#a2b5ce",qradarBlue:"#4178be"},fontFace:'"IBM Helvetica Neue", "Helvetica Neue", Helvetica, Arial, Roboto, sans-serif'},V=function(e){return e?encodeURIComponent(encodeURIComponent(e)):void 0},K=!1,F="";try{var P=L.QRadar.getCurrentUser();P&&!P.error&&(K=!0),F=L.QRadar.getCookie(L.QRadar.QRADAR_CSRF)}catch(ta){}function B(e,t,a,r,n){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(c.a.mark((function e(t,a,r,n,s){var l,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=T.a.create(),(i=Object.assign({},R.axiosHeaders,s||{})).Version="8",l.defaults.timeout=6e5,o=Math.ceil(1e3*Math.random()),console.time("".concat(o,": ").concat(t," ").concat(a)),u={data:[]},K&&(i[L.QRadar.QRADAR_CSRF]=F),e.prev=8,e.next=11,l.request({method:t,url:R.apiRoot+a+(r?"?"+N.a.stringify(r):""),data:n||{},headers:i});case 11:u=e.sent,e.next=23;break;case 14:if(e.prev=14,e.t0=e.catch(8),console.fail("Failed loading data from ".concat(a)),console.timeEnd("".concat(o,": ").concat(t," ").concat(a)),e.t0.response&&e.t0.response.data){e.next=22;break}return e.abrupt("return",{error:e.t0,message:"Failed performing the requested network operation"});case 22:return e.abrupt("return",{error:e.t0,message:e.t0.response.data.message});case 23:return console.timeEnd("".concat(o,": ").concat(t," ").concat(a)),e.abrupt("return",u.data);case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function H(e,t,a,r){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(c.a.mark((function e(t,a,r,n){var s,l,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"GET","id, status, message",s=a,l=a.status,i=0,o=setInterval(Object(p.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i++,!("CANCELLED"===l||"CANCELING"===l||"EXCEPTION"===l||"CONFLICT"===l||i>50)){e.next=6;break}clearInterval(o),r({error:!0,message:s.message}),e.next=19;break;case 6:if("COMPLETED"!==l){e.next=15;break}if(clearInterval(o),!n){e.next=12;break}return e.next=11,B("GET",t+"/results",{});case 11:s=e.sent;case 12:r(s),e.next=19;break;case 15:return e.next=17,B("GET",t,{fields:"id, status, message"});case 17:s=e.sent,l=s.status;case 19:case"end":return e.stop()}}),e)}))),2e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/reference_data/".concat(t),"GET",e.next=4,B("GET",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(p.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/reference_data/".concat(t),"POST",e.next=4,B("POST",r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(p.a)(c.a.mark((function e(t,a,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/").concat(V(a)),"GET",e.next=4,B("GET",n,void 0,void 0,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,a,r){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(c.a.mark((function e(t,a,r,n){var s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="/reference_data/".concat(t,"/").concat(V(a),"/dependents"),l="GET",i="status, id, message",e.prev=2,a){e.next=5;break}throw new Error;case 5:return e.next=7,B(l,s,{fields:i});case 7:if((o=e.sent)&&o.id){e.next=10;break}throw new Error;case 10:if(u=o.status||"CANCELLED","maps"===t?t="map":"sets"===t&&(t="set"),p="/reference_data/".concat(t,"_dependent_tasks/").concat(o.id),!n){e.next=17;break}return e.abrupt("return",o);case 17:H(p,u,r,!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),r({error:e.t0,message:"Unable to load dependents"});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))).apply(this,arguments)}function $(e,t,a){return ee.apply(this,arguments)}function ee(){return(ee=Object(p.a)(c.a.mark((function e(t,a,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/").concat(V(a)),"POST",e.next=4,B("POST",n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,a,r){return ae.apply(this,arguments)}function ae(){return(ae=Object(p.a)(c.a.mark((function e(t,a,r,n){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/reference_data/".concat(t,"/").concat(V(a),"/").concat(V(r)),"DELETE",e.next=4,B("DELETE",s,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,a,r){return ne.apply(this,arguments)}function ne(){return(ne=Object(p.a)(c.a.mark((function e(t,a,r,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(t,a,r,!0,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,a){return le.apply(this,arguments)}function le(){return(le=Object(p.a)(c.a.mark((function e(t,a,r){var n,s,l,i,o,u,p,d=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>3&&void 0!==d[3]&&d[3],s=d.length>4&&void 0!==d[4]&&d[4],l="/reference_data/".concat(t,"/").concat(V(a)),i="DELETE",e.prev=4,a){e.next=7;break}throw new Error;case 7:return e.next=9,B(i,l,{purge_only:n});case 9:if((o=e.sent)&&o.id){e.next=12;break}throw new Error;case 12:if(u=o.status,"maps"===t?t="map":"sets"===t&&(t="set"),p="/reference_data/".concat(t,"_delete_tasks/").concat(o.id),r&&!s){e.next=19;break}return e.abrupt("return",o);case 19:H(p,u,r);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),r({error:e.t0,message:e.t0.message||"Unable to delete Reference Data"});case 25:case"end":return e.stop()}}),e,null,[[4,22]])})))).apply(this,arguments)}function ie(e,t,a,r,n){return oe.apply(this,arguments)}function oe(){return(oe=Object(p.a)(c.a.mark((function e(t,a,r,n,s){var l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="/reference_data/".concat(t,"/").concat(V(a),"/").concat(V(r),"/").concat(V(n)),"DELETE",e.next=4,B("DELETE",l,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(p.a)(c.a.mark((function e(t,a,r){var n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/bulk_load/").concat(V(a)),"POST",(s={})["Content-Type"]="application/json",e.next=6,B("POST",n,{},r,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe,de=a(113),he=a.n(de);function fe(){return ye.apply(this,arguments)}function ye(){return(ye=Object(p.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pe){e.next=2;break}return e.abrupt("return",pe);case 2:return e.prev=2,e.next=5,L.QRadar.getCurrentUser();case 5:(t=e.sent)&&!t.error&&(pe=t.username),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",pe);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function me(e){var t=this.state.metaData;t.number_of_elements=e.number_of_elements,this.setState({metaData:t}),this.props.dataUpdated()}function ve(e,t){return be.apply(this,arguments)}function be(){return(be=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,u,p,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadDependents(),n=5e3,(s=this.props.size)/50>n&&(n=Math.ceil(s/50)),l=0,i=n;case 6:return u={Range:"items=".concat(l,"-").concat(i)},e.next=10,W(this.props.type,this.props.name,u);case 10:if(!(r=e.sent).error){e.next=16;break}return console.log("Failed loading all elements"),this.props.showError("Unable to load all elements. ".concat(s-l," entries have not been loaded.")),this.setState({loaded:!0}),e.abrupt("return");case 16:if(!this.props.size&&r.number_of_elements&&(s=r.number_of_elements),p=a?[]:this.state.allEntries,a=!1,!r.data){e.next=38;break}return h=this.parseResponseData(r),p?(d=p).push.apply(d,Object(o.a)(h)):p=h,e.next=24,this.setState({allEntries:p});case 24:if(delete r.data,this.tableChanged(),!(s&&s>i)){e.next=34;break}r.number_of_elements=i+1,this.setState({metaData:r}),l=i+1,i+=n,console.log("Loading next batch from ".concat(l," to ").concat(i)),e.next=36;break;case 34:return console.log("Done loading all elements"),e.abrupt("break",42);case 36:e.next=40;break;case 38:return console.log("Last batch did not return any new elements. Terminating"),e.abrupt("break",42);case 40:e.next=6;break;case 42:this.setState({metaData:r,loaded:!0});case 43:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ke(){return ge.apply(this,arguments)}function ge(){return(ge=Object(p.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){if(e.error)return a.props.showError("Unable to load dependents"),void a.setState({dependentsLoaded:!0});a.setState({dependents:e,dependentsLoaded:!0})},Z(this.props.type,this.props.name,t);case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function xe(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.displayLoadingModal(!0),t=function(e){a.tableChanged("new",[]),a.updateMetaData(e),a.setState({innerSelected:{}}),a.props.displayLoadingModal(!1)},e.next=4,re(this.props.type,this.props.name,t);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function we(e,t){var a=this.state.innerSelected;a[e]=t,this.setState({innerSelected:a})}function Se(e,t,a,r){var n="";r&&(n+="parentKey,"),a&&(n+="key,"),n+="value,first_seen,last_seen,source\n";var s=!0,l=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(s=(o=u.next()).done);s=!0){var c=o.value;r&&(n+='"'+c.outer_key.replace(/"/g,'""')+'",'),a&&(n+='"'+c.key.replace(/"/g,'""')+'",'),n+='"'+c.value.replace(/"/g,'""')+'","'+c.first_seen+'","'+c.last_seen+'","'+c.source.replace(/"/g,'""')+'"\n'}}catch(d){l=!0,i=d}finally{try{s||null==u.return||u.return()}finally{if(l)throw i}}var p=new Blob([n],{type:"text/csv"});he.a.saveAs(p,"".concat(e,".csv"))}var Ie={name:{value:"",type:"text",label:"Reference Set Name",help:"Required: The name of the Set to be created. Must not exist already"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"],help:"Required: The data type of the values in the new Set"},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"],help:"Optional: The value based on which new data expires from the Set"},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live",help:"Optional: If given, the entries of the set expire. Input format like '1 days', or '12 hours'"}},Oe={name:{value:"",type:"text",label:"Reference Map Name"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"",label:"Key Label",type:"text"},value_label:{value:"",label:"Value Label",type:"text"}},je={name:{value:"",type:"text",label:"Reference Map of Sets Name"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"",label:"Key Label",type:"text"},value_label:{value:"",label:"Value Label",type:"text"}},_e={name:{value:"",type:"text",label:"Reference Table Name",help:"Required: The name of the Table to be created. Must not exist already"},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"Outer Key Label",label:"Key Label",type:"text"},element_type:{value:"ALN",type:"select",label:"Key Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},inner_labels:{label:"Inner Keys",options:["ALN","NUM","IP","PORT","ALNIC","DATE"],type:"list",values:{"Inner Key 1":{label:"Inner Key 1",type:"ALN"}}}},Ae={value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Ce={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},De={file:{label:"File",value:"",type:"file"},bulkAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Te={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Le={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:"New lines are implicit separators",type:"text"}},Me={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:"New lines are implicit separators",type:"text"}},Ne={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Re={value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Ve={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},Ke={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},Fe={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Pe={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Be={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},ze={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},He=(a(114),a(115)),Ue=a.n(He);function qe(e){return Ue()(e,"dd/mmm/yyyy, hh:MM:ss TT")}function Je(e){var t="",a=e.split(/(\S+\s\S+)/).filter((function(e){return e.trim()})),r=!0,n=!1,s=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;0!=o.split(/\s/)[0]&&(t+=" "+o)}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return t}var Ge=[{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],Qe=[{key:"key",header:"Key",sort:!0,style:{wordBreak:"break-all"}},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],We=[{key:"key",header:"Key",sort:!0,style:{width:"10000px",wordBreak:"break-all"}}],Ye=[{key:"key",header:"Key",sort:!0,hidden:!0},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],Ze=[{key:"key",header:"Key",sort:!0,style:{width:"10000px",wordBreak:"break-all"}}],Xe=[{key:"parentKey",header:"Key",sort:!0,hidden:!0},{key:"key",header:"Inner Key",sort:!0,style:{wordBreak:"break-all"}},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],$e=a(217),et=a(218),tt=function(e){function t(){var e,a;Object(h.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(y.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).typeLookup={map:"Map",set:"Set",map_of_sets:"Map of Sets",table:"Table"},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=[s.a.createElement(s.a.Fragment,null,"Number of Elements: ",s.a.createElement(_.a,{type:"gray"},this.props.data.number_of_elements||0)),s.a.createElement(s.a.Fragment,null,"Creation Time: ",this.props.data.creation_time?qe(this.props.data.creation_time):""),s.a.createElement(s.a.Fragment,null,"Timeout Type: ",this.props.data.timeout_type),s.a.createElement(s.a.Fragment,null,"Value Type: ",this.props.data.element_type),s.a.createElement(s.a.Fragment,null,"Time To Live: ",this.props.data.time_to_live?Je(this.props.data.time_to_live):"Infinitly")],t=this.props.data.key_name_types&&"";if(void 0!==t){for(var a in this.props.data.key_name_types)t+=this.props.data.key_name_types[a]+" ("+a+"), ";e.splice(3,0,s.a.createElement(s.a.Fragment,null,"Key Types: ",t))}return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{kind:"danger",size:"small",className:"delete top right",onClick:this.props.deleteEntry},"Delete ",this.typeLookup[this.props.typeLabel]||"Data"),s.a.createElement(O.a,{kind:"danger",size:"small",className:"delete top-second right",onClick:this.props.purgeData},"Clear Data"),this.props.data.name?s.a.createElement($e.e,{className:"meta-data"},s.a.createElement($e.c,null,s.a.createElement($e.d,{head:!0},s.a.createElement($e.b,{head:!0,className:"meta-data-title"},this.props.data.name))),s.a.createElement($e.a,null,e.map((function(e,t){return s.a.createElement($e.d,{key:t},s.a.createElement($e.b,{className:"meta-data-entry"},e))})))):s.a.createElement(et.a,{className:"meta-data"}))}}]),t}(n.Component),at=a(5),rt=a(227),nt=a(76),st=a(77),lt=a(78),it=a(229),ot=rt.a.TableContainer,ut=rt.a.Table,ct=rt.a.TableHead,pt=rt.a.TableRow,dt=rt.a.TableBody,ht=rt.a.TableCell,ft=rt.a.TableHeader,yt=rt.a.TableToolbar,mt=rt.a.TableSelectAll,vt=rt.a.TableSelectRow,bt=rt.a.TableBatchActions,kt=rt.a.TableBatchAction,gt=rt.a.TableToolbarContent,xt=rt.a.TableToolbarSearch,Et=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(m.a)(t).call(this,e))).handleOnSelect=function(e,t){var r;r=t?[].concat(Object(o.a)(a.state.selected),[e.id]):a.state.selected.filter((function(t){return t!==e.id})),a.setState({selected:r}),a.props.innerTable?a.props.selectionChanged(e.outer_key||e.key,r):a.props.selectionChanged(r)},a.handleOnSelectAll=function(e,t){var r,n=t.map((function(e){return e.id}));r=e?n:[],a.setState({selected:r}),a.props.innerTable?a.props.selectionChanged(t[0].outer_key||t[0].key,r):a.props.selectionChanged(r)},a.onInputChange=function(e){a.props.tableChanged("search",{searchText:e.target.value}),a.setState({firstRowIndex:0,currentPage:1,updatePagination:Math.random()})},a.sortTable=function(e){var t="ASC";e===a.state.sortHeader&&(t="ASC"===a.state.sortDirection?"DESC":"ASC");var r={ASC:[-1,1],DESC:[1,-1]};a.props.data.sort((function(a,n){return a[e]<n[e]?r[t][0]:r[t][1]})),a.setState({sortDirection:t,sortHeader:e})},a.state={selected:[],currentPageSize:10,firstRowIndex:0,currentPage:1,updatePagination:Math.random(),sortDirection:"ASC"},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,a=this.props.data.slice(this.state.firstRowIndex,this.state.firstRowIndex+this.state.currentPageSize);return s.a.createElement(rt.a,{useZebraStyles:!0,isSortable:!0,rows:a,headers:this.props.columns,render:function(a){var r=a.rows,n=a.headers,l=a.getHeaderProps,i=a.getRowProps,o=a.getTableProps,u=a.getSelectionProps,c=a.getBatchActionProps,p=a.selectedRows;return s.a.createElement(ot,null,s.a.createElement(yt,null,s.a.createElement(bt,c(),s.a.createElement(kt,{renderIcon:at.l,onClick:function(t){return e.props.deleteItem(p)}},"Delete")),s.a.createElement(gt,null,!e.props.innerTable&&s.a.createElement(xt,{onChange:e.onInputChange}),s.a.createElement(O.a,{onClick:e.props.addItem,size:"small",kind:"primary"},"Add Entry"),s.a.createElement(O.a,{onClick:e.props.bulkAddItem,size:"small",kind:"primary"},"Bulk Add"),s.a.createElement(O.a,{onClick:e.props.importItems,size:"small",kind:"primary"},"Import CSV"))),s.a.createElement(ut,o(),s.a.createElement(ct,null,s.a.createElement(pt,null,e.props.expandable&&s.a.createElement(nt.a,null),s.a.createElement(mt,u()),n.map((function(t){return s.a.createElement(ft,Object.assign({},l({header:t}),{sortDirection:e.state.sortDirection,isSortHeader:e.state.sortHeader==t.key,onClick:function(){return e.sortTable(t.key)}}),t.header)})))),s.a.createElement(dt,null,e.props.expandable&&r.map((function(a){return s.a.createElement(s.a.Fragment,{key:a.id},s.a.createElement(st.a,i({row:a}),s.a.createElement(vt,u({row:a})),a.cells.map((function(e){return s.a.createElement(ht,{key:e.id},e.value)}))),a.isExpanded&&s.a.createElement(lt.a,{colSpan:n.length+2},function(a){return console.log(a),s.a.createElement("div",{className:"inner-table"},s.a.createElement(t,{innerTable:!0,parent:a,data:a.values,columns:e.props.extendableColumns,addItem:function(t){return e.props.addInnerItem(a)},deleteItem:function(t){return e.props.deleteInnerItem(a)},searchText:e.props.innerSearchText}))}(e.props.data.find((function(e){return e.key===a.id})))))})),!e.props.expandable&&r.map((function(e){return s.a.createElement(pt,Object.assign({key:e.id},i({row:e})),s.a.createElement(vt,u({row:e})),e.cells.map((function(e){return s.a.createElement(ht,{key:e.id},e.value)})))})))),s.a.createElement(it.a,{key:e.state.currentPage*e.props.data.length*e.state.updatePagination,page:e.state.currentPage,pageSize:e.state.currentPageSize,pageSizes:[10,30,50,100],totalItems:e.props.data.length,onChange:function(t){var a=t.page,r=t.pageSize;return e.setState({firstRowIndex:r*(a-1),currentPageSize:r})}}))}})}}]),t}(n.Component),wt=a(219),St=rt.a.Table,It=rt.a.TableHead,Ot=rt.a.TableRow,jt=rt.a.TableBody,_t=rt.a.TableCell,At=rt.a.TableHeader;var Ct=function(e){var t;return t=e.dependents&&e.dependents.length>0?e.dependents.map((function(e){return{id:String(Math.random()),dependent:"("+e.dependent_type+") "+e.dependent_name}})):[{id:"0",dependent:"This ReferenceData appears to not have any data depending on it"}],e.loaded?s.a.createElement(rt.a,{headers:[{header:"Dependents",key:"dependent"}],rows:t,useZebraStyles:!0,render:function(e){var t=e.rows,a=e.headers,r=e.getTableProps,n=e.getHeaderProps,l=e.getRowProps;return s.a.createElement(St,r(),s.a.createElement(It,null,s.a.createElement(Ot,null,a.map((function(e){return s.a.createElement(At,n({header:e}),e.header)})))),s.a.createElement(jt,null,t.map((function(e){return s.a.createElement(Ot,Object.assign({key:e.id},l({row:e})),e.cells.map((function(e){return s.a.createElement(_t,{key:e.id},e.value)})))}))))}}):s.a.createElement(wt.a,{headers:["Dependents"],columnCount:1,rowCount:1})},Dt=a(231),Tt=a(220),Lt=a(232),Mt=a(221),Nt=a(230),Rt=a(222),Vt=function(e){function t(e){var a;return Object(h.a)(this,t),a=Object(y.a)(this,Object(m.a)(t).call(this,e)),console.log(a.props),a.state={entries:a.props.entries,filename:"",show:!1},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.save=a.save.bind(Object(v.a)(a)),a.closeModal=a.closeModal.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){this.props.modal!==this.state.show&&(console.log(this.props.entries),this.setState({entries:JSON.parse(JSON.stringify(this.props.entries)),show:this.props.modal,filename:""}))}},{key:"handleChange",value:function(e,t){var a=this.state.entries,r=this.state.filename;"file"===e.target.type?(a[t].value=e.target.files.item(0),r=e.target.files.item(0).name):a[t].value=e.target.value,this.setState({entries:a,filename:r})}},{key:"save",value:function(){this.props.save(this.state.entries),this.closeModal()}},{key:"closeModal",value:function(){this.setState({entries:JSON.parse(JSON.stringify(this.props.entries)),filename:"",show:!1}),this.props.closeModal()}},{key:"label",value:function(e){return this.state.entries[e].help?s.a.createElement(Dt.a,{direction:"right",triggerText:this.state.entries[e].label},this.state.entries[e].help):s.a.createElement(Tt.a,null,this.state.entries[e].label)}},{key:"render",value:function(){var e=this;return s.a.createElement(Lt.a,{size:"sm",open:this.props.modal,onRequestSubmit:this.save,onRequestClose:this.closeModal,modalHeading:this.props.headerLabel||"Add Entries",primaryButtonText:this.props.saveLabel||"Save",secondaryButtonText:"Close"},s.a.createElement($e.e,{className:"input-modal"},s.a.createElement($e.a,null,Object.keys(this.state.entries).map((function(t){return s.a.createElement($e.d,{className:"input-modal-entry"},{file:s.a.createElement(Mt.a,{id:t,labelText:e.state.filename||"Drag and drop file here or click to upload",onChange:function(a){return e.handleChange(a,t)}}),text:s.a.createElement(Nt.a,{id:t,labelText:e.label(t),value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}}),textarea:s.a.createElement(Rt.a,{id:t,labelText:e.label(t),value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}})}[e.state.entries[t].type])})))))}}]),t}(n.Component),Kt=function(e){function t(e,a){var r;return Object(h.a)(this,t),(r=Object(y.a)(this,Object(m.a)(t).call(this,e))).type=a,r.columns={set:Ge,map:Qe,map_of_sets:We,map_of_setsInner:Ye,table:Ze,tableInner:Xe},r.state={innerSelected:{},metaData:{},allEntries:[],tableData:[],loaded:!1,searchText:"",innerSearchText:"",modalInputDefinition:{}},r.clearInnerSelection={},r.addItem=r.addItem.bind(Object(v.a)(r)),r.deleteItem=r.deleteItem.bind(Object(v.a)(r)),r.bulkAddItems=r.bulkAddItems.bind(Object(v.a)(r)),r.importItems=r.importItems.bind(Object(v.a)(r)),r.exportItems=r.exportItems.bind(Object(v.a)(r)),r.clickAddItem=r.clickAddItem.bind(Object(v.a)(r)),r.clickDeleteItem=r.clickDeleteItem.bind(Object(v.a)(r)),r.clickBulkAddItem=r.clickBulkAddItem.bind(Object(v.a)(r)),r.clickImportItems=r.clickImportItems.bind(Object(v.a)(r)),r.clickAddInnerItem=r.clickAddInnerItem.bind(Object(v.a)(r)),r.clickDeleteInnerItem=r.clickDeleteInnerItem.bind(Object(v.a)(r)),r.tableChanged=r.tableChanged.bind(Object(v.a)(r)),r.updateMetaData=me.bind(Object(v.a)(r)),r.loadData=ve.bind(Object(v.a)(r)),r.loadDependents=ke.bind(Object(v.a)(r)),r.purgeData=xe.bind(Object(v.a)(r)),r.innerSelectionChanged=we.bind(Object(v.a)(r)),r.loadData(r.props.api),r}return Object(b.a)(t,e),Object(f.a)(t,[{key:"deleteItem",value:function(){}},{key:"bulkAddItems",value:function(){}},{key:"importItems",value:function(){}},{key:"exportItems",value:function(){}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.displayLoadingModal(!0),e.next=3,$(this.props.type,this.props.name,t);case 3:a=e.sent,r=this.updateData(this.state.allEntries,t,!0),a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.displayLoadingModal(!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clickAddItem",value:function(){this.setState({showInputModal:!0,modalSave:this.addItem,modalInputDefinition:r[this.type+"AddItem"]})}},{key:"clickDeleteItem",value:function(e){this.deleteItem(e)}},{key:"clickBulkAddItem",value:function(){this.setState({showInputModal:!0,modalSave:this.bulkAddItems,modalInputDefinition:r[this.type+"BulkAddItems"]})}},{key:"clickImportItems",value:function(){this.setState({showInputModal:!0,modalSave:this.importItems,modalInputDefinition:r[this.type+"ImportItems"]})}},{key:"clickAddInnerItem",value:function(e){var t=this;this.setState({showInputModal:!0,modalSave:function(a){return t.addInnerItem(e,a)},modalInputDefinition:r[this.type+"AddInnerItem"]})}},{key:"clickDeleteInnerItem",value:function(e){this.deleteInnerItem(e,this.state.innerSelected[e.key]);var t=this.state.innerSelected;t[e.key]=[],this.setState({innerSelected:t}),this.clearInnerSelection[e.key]()}},{key:"tableChanged",value:function(e,t){var a=this.state.allEntries,r=this.state.searchText;"search"===e&&t&&(r=t.searchText),"new"===e&&t&&(a=t);var n=[],s=!1;try{r=new RegExp(r,"gi"),s=!0}catch(ta){}var l=0,i=!0,o=!1,u=void 0;try{for(var c,p=a[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var d=c.value;this.testValue(d,r,s)&&(d.index=l++,n.push(d))}}catch(h){o=!0,u=h}finally{try{i||null==p.return||p.return()}finally{if(o)throw u}}this.setState({tableData:n,searchText:r,allEntries:a})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Vt,{modal:this.state.showInputModal,save:this.state.modalSave,entries:JSON.parse(JSON.stringify(this.state.modalInputDefinition)),closeModal:function(t){return e.setState((function(e){return{showInputModal:!e.showInputModal}}))}}),s.a.createElement(tt,{data:this.state.metaData,typeLabel:this.type,deleteEntry:this.props.deleteEntry,purgeData:this.purgeData}),this.state.loaded?s.a.createElement(Et,{tableChanged:this.tableChanged,data:this.state.tableData,columns:this.columns[this.type],type:this.type,addItem:this.clickAddItem,bulkAddItem:this.clickBulkAddItem,importItems:this.clickImportItems,exportItems:this.exportItems,deleteItem:this.clickDeleteItem,searchText:this.state.searchText,expandable:["map_of_sets","table"].includes(this.type),extendableColumns:this.columns[this.type+"Inner"],addInnerItem:this.clickAddInnerItem,deleteInnerItem:this.clickDeleteInnerItem,innerSearchText:this.state.innerSearchText,innerSelectionChanged:this.innerSelectionChanged,innerSelectionClearedCallback:function(t,a){return e.clearInnerSelection[t]=a}}):s.a.createElement(wt.a,{rowCount:Math.min(10,this.props.size+1||1),columnCount:this.columns[this.type].length}),s.a.createElement("div",{className:"separator"}),s.a.createElement(Ct,{dependents:this.state.dependents,loaded:this.state.dependentsLoaded}))}}]),t}(n.Component),Ft=function(e){function t(e){return Object(h.a)(this,t),Object(y.a)(this,Object(m.a)(t).call(this,e,"set"))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddSeparator:t.bulkAddSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){Se(this.props.name,this.state.allEntries)}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(a){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value.value){e.next=3;break}return this.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return e.next=5,fe();case 5:r=e.sent,n={value:a.value.value,source:a.source.value||r},Object(C.a)(Object(m.a)(t.prototype),"addItem",this).call(this,n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t&&t.length){e.next=3;break}return e.abrupt("return");case 3:this.props.displayLoadingModal(!0),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=8,i=t[Symbol.iterator]();case 10:if(n=(o=i.next()).done){e.next=19;break}return u=o.value,e.next=14,te(this.props.type,this.props.name,u.id);case 14:a=e.sent,r=this.updateData(r,{value:u.id},!1);case 16:n=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),s=!0,l=e.t0;case 25:e.prev=25,e.prev=26,n||null==i.return||i.return();case 28:if(e.prev=28,!s){e.next=31;break}throw l;case 31:return e.finish(28);case 32:return e.finish(25);case 33:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.displayLoadingModal(!1);case 35:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.displayLoadingModal(!0),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddSeparator.value).split(t.bulkAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),a=Object(o.a)(new Set(a)),r=a.map((function(e){return{value:e,id:e,source:"reference data api"}})),e.next=6,ue(this.props.type,this.props.name,a);case 6:(n=e.sent).error?this.props.showError(n.message):(l=this.state.allEntries,(s=l).push.apply(s,Object(o.a)(r)),l=l.filter((function(e,t,a){return t===a.findIndex((function(t){return t.value===e.value}))})),this.tableChanged("new",l),this.updateMetaData(n)),this.props.displayLoadingModal(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a){var r=e;a?-1===r.findIndex((function(e){return t.value===e.value}))&&r.push({value:t.value,id:t.value,source:t.source}):r=r.filter((function(e){return e.value!==t.value}));return r}},{key:"parseResponseData",value:function(e){var t=[];return e.number_of_elements>0&&e.data.forEach((function(e){void 0!==e.value&&(e.id=e.value,t.push(e))})),t}},{key:"testValue",value:function(e,t,a){if(!e.value)return!1;return a?e.value.match(t):e.value.toLowerCase().includes(t.toLowerCase())}}]),t}(Kt),Pt=a(34),Bt=function(e){function t(e){return Object(h.a)(this,t),Object(y.a)(this,Object(m.a)(t).call(this,e,"map"))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){Se(this.props.name,this.state.allEntries,!0)}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(a){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value.value&&a.key.value){e.next=3;break}return this.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return e.next=5,fe();case 5:r=e.sent,n={key:a.key.value,value:a.value.value,source:a.source.value||r},Object(C.a)(Object(m.a)(t.prototype),"addItem",this).call(this,n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.displayLoadingModal(!0),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.value,n=t.id,s=r.findIndex((function(e){return e.key===n})),e.next=5,te(p.props.type,p.props.name,n,{value:r[s].value});case 5:a=e.sent,r=p.updateData(r,{key:n},!1);case 7:case"end":return e.stop()}}),e)})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,u,p,h,f,y,m,v,b,k,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.displayLoadingModal(!0),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=[],n={},s=!0,l=!1,i=void 0,e.prev=7,u=a[Symbol.iterator]();!(s=(p=u.next()).done);s=!0)h=p.value,f=h.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),y=Object(d.a)(f,2),m=y[0],v=y[1],n[m]=v,r.push({key:m,value:v,id:m,source:"reference data api"});e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),l=!0,i=e.t0;case 15:e.prev=15,e.prev=16,s||null==u.return||u.return();case 18:if(e.prev=18,!l){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return r=r.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),e.next=26,ue(this.props.type,this.props.name,n);case 26:(b=e.sent).error?this.props.showError(b.message):(g=this.state.allEntries,(k=g).push.apply(k,Object(o.a)(r)),g=g.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),this.tableChanged("new",g),this.updateMetaData(b)),this.props.displayLoadingModal(!1);case 29:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a){var r=e;return a?r.push({key:t.key,value:t.value,id:t.key,source:t.source}):r=r.filter((function(e){return e.key!==t.key})),r=r.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),r}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)void 0!==a&&t.push(Object(Pt.a)({key:a},e.data[a],{id:a}));return t}}},{key:"testValue",value:function(e,t,a){if(!e.value||!e.key)return!1;return a?e.value.match(t)||e.key.match(t):e.value.toLowerCase().includes(t.toLowerCase())||e.key.toLowerCase().includes(t.toLowerCase())}}]),t}(Kt),zt=a(56),Ht=function(e){function t(e){return Object(h.a)(this,t),Object(y.a)(this,Object(m.a)(t).call(this,e,"map_of_sets"))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.keyAddDataValues.value.replace(/\r?\n/g,t.keyAddSeparator.value).split(t.keyAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=t.keyAddDataKey.value,n=Object(zt.a)({},r,a),e.next=5,ue(this.props.type,this.props.name,n);case 5:(s=e.sent)&&(l=this.updateData(this.state.allEntries,{key:r,values:a,source:"reference data api"},!0,!0),this.tableChanged("new",l),this.updateMetaData(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.displayLoadingModal(!0),r=this.state.tableData,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n,s,l,i,o,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,n=r.findIndex((function(e){return e.key===t})),s=!0,l=!1,i=void 0,e.prev=5,o=r[n].values[Symbol.iterator]();case 7:if(s=(d=o.next()).done){e.next=16;break}return h=d.value,e.next=11,te(p.props.type,p.props.name,t,{value:h.value});case 11:a=e.sent,r=p.updateData(r,{key:t},!1,!0);case 13:s=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),l=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==o.return||o.return();case 25:if(e.prev=25,!l){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,null,[[5,18,22,30],[23,,25,29]])})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:if(r=e.sent,n={value:a.value.value,key:t.key,source:a.source.value||r},s=this.state.allEntries.findIndex((function(e){return e.key===t.key})),-1===this.state.allEntries[s].values.findIndex((function(e){return e.value===a.value.value}))){e.next=9;break}return console.log("Value already in table. Skipping"),this.props.showError("Value already in table."),e.abrupt("return");case 9:return this.props.displayLoadingModal(!0),e.next=12,$(this.props.type,this.props.name,n);case 12:l=e.sent,i=this.updateData(this.state.allEntries,n,!0),l.error?this.props.showError(l.message):(this.tableChanged("new",i),this.updateMetaData(l)),this.props.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.length){e.next=2;break}return e.abrupt("return");case 2:this.props.displayLoadingModal(!0),n=this.state.allEntries,s=!0,l=!1,i=void 0,e.prev=7,o=a[Symbol.iterator]();case 9:if(s=(u=o.next()).done){e.next=18;break}return p=u.value,e.next=13,te(this.props.type,this.props.name,t.key,{value:p});case 13:r=e.sent,n=this.updateData(n,{key:t.key,value:p},!1);case 15:s=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),l=!0,i=e.t0;case 24:e.prev=24,e.prev=25,s||null==o.return||o.return();case 27:if(e.prev=27,!l){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:r.error?this.props.showError(r.message):(this.tableChanged("new",n),this.updateMetaData(r)),this.props.displayLoadingModal(!1);case 34:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a,r){if(r)if(a){var n=e.findIndex((function(e){return e.key===t.key}));if(-1===n){var s=Object(o.a)(new Set(t.values));s=s.map((function(e){return{value:e,id:e,key:t.key,source:t.source}})),e.push({key:t.key,values:s,id:t.key})}else{var l=!0,i=!1,u=void 0;try{for(var c,p=function(){var a=c.value;-1===e[n].values.findIndex((function(e){return e.value===a}))&&e[n].values.push({value:a,id:a,key:t.key,source:t.source})},d=t.values[Symbol.iterator]();!(l=(c=d.next()).done);l=!0)p()}catch(f){i=!0,u=f}finally{try{l||null==d.return||d.return()}finally{if(i)throw u}}}}else e=e.filter((function(e){return e.key!==t.key}));else{var h=e.findIndex((function(e){return e.key===t.key}));-1===h?console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key"):a?e[h].values.push({value:t.value,id:t.value,key:t.key,source:t.source}):e[h].values=e[h].values.filter((function(e){return e.value!==t.value}))}return e}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){var a=function(t){e.data[t]=e.data[t].map((function(e){return Object(Pt.a)({key:t,id:e.value},e)}))};for(var r in e.data)a(r);t=Object.keys(e.data).map((function(t){return{key:t,values:e.data[t],valueLabel:e.value_label,id:t}}))}return t}},{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddValuesSeparator:t.bulkAddValuesSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p,h,f,y,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.displayLoadingModal(!0),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},n=!0,s=!1,l=void 0,e.prev=6,i=a[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)u=o.value,p=u.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),h=Object(d.a)(p,2),f=h[0],y=h[1],r.hasOwnProperty(f)||(r[f]={}),r[f]=y.split(t.bulkAddValuesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e}));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,l=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!s){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,ue(this.props.type,this.props.name,r);case 24:(m=e.sent).error?this.props.showError(m.message):this.updateMetaData(m),this.loadData(this.props.type,!0),this.props.displayLoadingModal(!1);case 28:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var n,s=this.state.allEntries[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;e.push.apply(e,Object(o.a)(l.values))}}catch(i){a=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}Se(this.props.name,e,!0,!1)}},{key:"testValue",value:function(e,t,a){if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var r=!0,n=!1,s=void 0;try{for(var l,i=e.values[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(a?o.value.match(t):o.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return!1}}]),t}(Kt),Ut=function(e){function t(e){return Object(h.a)(this,t),Object(y.a)(this,Object(m.a)(t).call(this,e,"table"))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"clickAddItem",value:function(){var e={};if(this.state.metaData)for(var t in this.state.metaData.key_name_types)e[t]={label:t,value:"",type:"text",element_type:this.state.metaData.key_name_types[t]};var a=Object(Pt.a)({outer_key:{label:this.state.metaData.key_label||"Key",value:"",type:"text"}},e,{source:{label:"Comment",value:"",type:"text"}});this.setState({showInputModal:!0,modalSave:this.addItem,modalInputDefinition:a})}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.displayLoadingModal(!0),r=this.state.allEntries,n=t.outer_key.value,s=t.source.value,r=this.updateData(r,{outer_key:n,values:[]},!0,!0),this.tableChanged("new",r),delete t.outer_key,delete t.source,e.t0=c.a.keys(t);case 9:if((e.t1=e.t0()).done){e.next=18;break}if(l=e.t1.value,t[l].value){e.next=13;break}return e.abrupt("continue",9);case 13:return e.next=15,this.addInnerItem({key:n},{key:{value:l},value:{value:t[l].value},source:{value:s}},!0);case 15:a=e.sent,e.next=9;break;case 18:this.updateMetaData(a),this.props.displayLoadingModal(!1);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.displayLoadingModal(!0),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n,s,l,i,o,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,n=r.findIndex((function(e){return e.key===t})),s=!0,l=!1,i=void 0,e.prev=5,o=r[n].values[Symbol.iterator]();case 7:if(s=(d=o.next()).done){e.next=16;break}return h=d.value,e.next=11,ie(p.props.type,p.props.name,t,h.key,{value:h.value});case 11:(a=e.sent).error?p.props.showError(a.message):r=p.updateData(r,{outer_key:t},!1,!0);case 13:s=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),l=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==o.return||o.return();case 25:if(e.prev=25,!l){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,null,[[5,18,22,30],[23,,25,29]])})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a,r){var n,s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||this.props.displayLoadingModal(!0),n=t.key,s=a.key.value,l=a.value.value,e.next=6,fe();case 6:return i=e.sent,o=a.source.value||i,e.next=10,$(this.props.type,this.props.name,{outer_key:n,inner_key:s,value:l,source:o});case 10:if(u=e.sent,p=this.updateData(this.state.allEntries,{outer_key:n,inner_key:s,value:l,source:o},!0),u.error?this.props.showError(u.message):(this.updateMetaData(u),this.tableChanged("new",p)),!r){e.next=15;break}return e.abrupt("return",u);case 15:this.props.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"deleteInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,o,u,p,d=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.length){e.next=2;break}return e.abrupt("return");case 2:this.props.displayLoadingModal(!0),n=this.state.allEntries,s=!0,l=!1,i=void 0,e.prev=7,o=c.a.mark((function e(){var a,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.value,s=n.findIndex((function(e){return e.key===t.key})),l=n[s].values.findIndex((function(e){return e.key===a})),e.next=5,ie(d.props.type,d.props.name,t.key,a,{value:n[s].values[l].value});case 5:r=e.sent,n=d.updateData(n,{outer_key:t.key,inner_key:a},!1,!1);case 7:case"end":return e.stop()}}),e)})),u=a[Symbol.iterator]();case 10:if(s=(p=u.next()).done){e.next=15;break}return e.delegateYield(o(),"t0",12);case 12:s=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),l=!0,i=e.t1;case 21:e.prev=21,e.prev=22,s||null==u.return||u.return();case 24:if(e.prev=24,!l){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:r.error?this.props.showError(r.message):(this.tableChanged("new",n),this.updateMetaData(r)),this.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a,r){if(r)if(a){if(-1!==e.findIndex((function(e){return e.key===t.outer_key})))return;e.push({key:t.outer_key,values:t.values,id:t.outer_key})}else e=e.filter((function(e){return e.key!==t.outer_key}));else{var n=e.findIndex((function(e){return e.key===t.outer_key}));if(-1===n)console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key");else{var s=e[n].values.findIndex((function(e){return e.key===t.inner_key}));a?-1===s?e[n].values.push({outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}):e[s].values[s]={outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}:e[n].values.splice(s,1)}}return e}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)for(var r in e.data[a])e.data[a][r]=Object(Pt.a)({outer_key:a,key:r,id:r},e.data[a][r]);t=Object.keys(e.data).map((function(t){return{key:t,values:Object.values(e.data[t]),id:t}}))}return t}},{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p,h,f,y,m,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.displayLoadingModal(!0),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},n=!0,s=!1,l=void 0,e.prev=6,i=a[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)u=o.value,p=u.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),h=Object(d.a)(p,3),f=h[0],y=h[1],m=h[2],r.hasOwnProperty(f)||(r[f]={}),r[f][y]=m;e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,l=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!s){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,ue(this.props.type,this.props.name,r);case 24:(v=e.sent).error?this.props.showError(v.message):this.updateMetaData(v),this.loadData(this.props.type,!0),this.props.displayLoadingModal(!1);case 28:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var n,s=this.state.allEntries[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;e.push.apply(e,Object(o.a)(l.values))}}catch(i){a=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}Se(this.props.name,e,!0,!0)}},{key:"testValue",value:function(e,t,a){try{if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var r=!0,n=!1,s=void 0;try{for(var l,i=e.values[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(a?o.value.match(t):o.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}}catch(ta){return!1}return!1}}]),t}(Kt),qt=a(223),Jt=a(224),Gt=a(228),Qt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(m.a)(t).call(this,e))).state={type:a.props.type,entries:JSON.parse(JSON.stringify(r[a.props.type]))},a.typeLookup={tables:"Table",map_of_sets:"Map of Sets",sets:"Set",maps:"Map"},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){this.state.type!==this.props.type&&this.setState({type:this.props.type,entries:JSON.parse(JSON.stringify(r[this.props.type]))})}},{key:"handleChange",value:function(e,t){var a=this.state.entries;a[t].value=e.target.value,this.setState({entries:a})}},{key:"handleDropdownChange",value:function(e,t){var a=this.state.entries;a[t].value=e.selectedItem,this.setState({entries:a})}},{key:"render",value:function(){var e=this;return s.a.createElement(qt.a,null,s.a.createElement(Jt.a,{legendText:"Add new Reference "+this.typeLookup[this.state.type]+" to Database"}),Object.keys(this.state.entries).map((function(t){var a;switch(e.state.entries[t].type){case"select":a=s.a.createElement(Gt.a,{selectedItem:e.state.entries[t].value,onChange:function(a){return e.handleDropdownChange(a,t)},items:e.state.entries[t].options});break;case"list":a=s.a.createElement(Wt,{options:e.state.entries[t].options,label:e.state.entries[t].label,values:e.state.entries[t].values});break;case"date":a=s.a.createElement(Yt,{options:e.state.entries[t].options,label:e.state.entries[t].label,setValue:function(a){return e.state.entries[t].value=a}});break;default:a=s.a.createElement(Nt.a,{id:t,value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}})}return s.a.createElement(Jt.a,{key:t},e.state.entries[t].help?s.a.createElement(Dt.a,{direction:"right",triggerText:e.state.entries[t].label},e.state.entries[t].help):s.a.createElement(Tt.a,null,e.state.entries[t].label),a)})),s.a.createElement(O.a,{kind:"primary",size:"small",onClick:function(){return e.props.save(e.state.entries)}},"Create"))}}]),t}(n.Component),Wt=function(e){function t(e){var a;Object(h.a)(this,t),a=Object(y.a)(this,Object(m.a)(t).call(this,e));var r={};return Object.keys(a.props.values).forEach((function(e){r[e]=a.props.values[e]})),a.state={entries:r,nextKeyValue:2},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e,t,a){var r=this.state.entries;r[t][a]=e.target.value||e.target.text,this.setState({entries:r}),this.props.values[t][a]=e.target.value}},{key:"handleDropdownChange",value:function(e,t,a){var r=this.state.entries;r[t][a]=e.selectedItem,this.setState({entries:r}),this.props.values[t][a]=e.selectedItem}},{key:"addInnerKey",value:function(e){var t="Inner Key "+this.state.nextKeyValue,a=this.state.entries;a[t]={label:t,type:"ALN"},this.setState({entries:a,nextKeyValue:this.state.nextKeyValue+1}),this.props.values[t]={label:t,type:"ALN"}}},{key:"removeInnerKey",value:function(e){var t=this.state.entries;delete t[e],this.setState({entries:t}),delete this.props.values[e]}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},Object.keys(this.state.entries).map((function(t){return s.a.createElement("div",{className:"input-group",key:t},s.a.createElement(Gt.a,{items:e.props.options,selectedItem:e.state.entries[t].type,onChange:function(a){return e.handleDropdownChange(a,t,"type")}}),s.a.createElement(Nt.a,{key:t,value:e.state.entries[t].label,onChange:function(a){return e.handleChange(a,t,"label")}}),s.a.createElement(O.a,{kind:"danger",size:"small",hasIconOnly:!0,renderIcon:at.k,iconDescription:"Delete",tooltipPosition:"bottom",className:"delete-inner-key",onClick:function(a){return e.removeInnerKey(t)}}))})),s.a.createElement(O.a,{kind:"tertiary",size:"small",onClick:function(t){return e.addInnerKey(t)}},"Add Inner Key"))}}]),t}(n.Component),Yt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(m.a)(t).call(this,e))).state={label:"",type:"days"},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){var t="";e.target.value&&(t=e.target.value+" "+this.state.type),this.setState({label:e.target.value}),this.props.setValue(t)}},{key:"handleDropdownChange",value:function(e){var t=this.state.label+" "+e.selectedItem;this.setState({type:e.selectedItem}),this.props.setValue(t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},s.a.createElement("div",{className:"input-group"},s.a.createElement(Nt.a,{value:this.state.label,onChange:function(t){return e.handleChange(t)}}),s.a.createElement(Gt.a,{selectedItem:this.state.type,onChange:function(t){return e.handleDropdownChange(t)},items:this.props.options})))}}]),t}(n.Component),Zt=Qt,Xt=["background: green","color: white","display: block","text-align: center"].join(";"),$t=["background: red","color: white","display: block","text-align: center"].join(";");console.success=function(e){return console.log("%c".concat(e),Xt)},console.fail=function(e){return console.log("%c".concat(e),$t)};var ea=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(y.a)(this,Object(m.a)(t).call(this,e))).parseHash=function(){var e=decodeURI(window.location.hash.substring("#/data".length)),t=e.split("/"),a=Object(d.a)(t,3);a[0];return[e,a[1],a[2]]},a.updateHash=function(e){window.location.hash="/data/"+e},a.refDataMapping={maps:Bt,sets:Ft,map_of_sets:Ht,tables:Ut};return a.state={refData:{sets:{key:"sets",label:"Reference Sets",nodes:{},isOpen:!1},maps:{key:"maps",label:"Reference Maps",nodes:{},isOpen:!1},map_of_sets:{key:"map_of_sets",label:"Reference Map of Sets",nodes:{},isOpen:!1},tables:{key:"tables",label:"Reference Tables",nodes:{},isOpen:!1}},errorMessages:[],displayError:!1,loadingModalOpen:!1},a.menuItemClicked=a.menuItemClicked.bind(Object(v.a)(a)),a.createEntry=a.createEntry.bind(Object(v.a)(a)),a.entryCreated=a.entryCreated.bind(Object(v.a)(a)),a.deleteEntry=a.deleteEntry.bind(Object(v.a)(a)),a.displayLoadingModal=a.displayLoadingModal.bind(Object(v.a)(a)),a.showError=a.showError.bind(Object(v.a)(a)),a.getRefData=a.getRefData.bind(Object(v.a)(a)),a.getRefData(),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"menuItemClicked",value:function(e,t){e.stopPropagation(),this.updateHash(t.key),this.setState({atHome:!1,createNew:!1})}},{key:"createEntry",value:function(e,t){e.stopPropagation(),this.setState({createNew:!0,createNewReferenceEntryType:t})}},{key:"entryCreated",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.displayLoadingModal(!0),a={},t.inner_labels&&(a.outer_key_label=t.key_label.value,r=[],Object.keys(t.inner_labels.values).forEach((function(e){r.push({key_name:t.inner_labels.values[e].label,element_type:t.inner_labels.values[e].type})})),a.key_name_types=JSON.stringify(r)),e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=11;break}if("key_label"!==(n=e.t1.value)&&"inner_labels"!==n){e.next=8;break}return e.abrupt("continue",4);case 8:a[n]=t[n].value,e.next=4;break;case 11:return e.next=13,G(this.state.createNewReferenceEntryType,a);case 13:(s=e.sent).error?this.showError(s.message):(l=this.state.createNewReferenceEntryType+"/"+a.name,this.updateHash(l),this.setState({createNew:!1,atHome:!1}),this.getRefData()),this.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEntry",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,a,r,n,s,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this entry")){e.next=9;break}return this.displayLoadingModal(!0),t=function(e){e.error?l.showError(e.message):(l.updateHash(""),l.setState({atHome:!0}),l.getRefData()),l.displayLoadingModal(!1)},a=this.parseHash(),r=Object(d.a)(a,3),r[0],n=r[1],s=r[2],e.next=7,se(n,s,t);case 7:e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"displayLoadingModal",value:function(e){this.setState({loadingModalOpen:e})}},{key:"showError",value:function(e){var t=this.state.errorMessages;e||(e="An unspecified error occured"),e=Array.isArray(e)?e:[e],t.push.apply(t,Object(o.a)(e)),this.setState({displayError:!0,errorMessages:t})}},{key:"getRefData",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,a,r,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.refData,a=c.a.mark((function e(a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(a);case 2:if(!(r=e.sent).error){e.next=6;break}return n.props.showError("Unable to load "+t[a].label),e.abrupt("return","continue");case 6:t[a].nodes={},t[a].size=r.length,t[a].datatype=a.replace(/_/g," "),r.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})),r.forEach((function(e){var r={label:e.name,size:e.number_of_elements,datatype:a,key:a+"/"+e.name};t[a].nodes[e.name]=r}));case 11:case"end":return e.stop()}}),e)})),e.t0=c.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,e.delegateYield(a(r),"t2",6);case 6:if("continue"!==e.t2){e.next=9;break}return e.abrupt("continue",3);case 9:e.next=3;break;case 11:this.setState({refData:t});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="",a="",r="";if(window.location.hash.includes("#/data/")){var n=this.parseHash(),l=Object(d.a)(n,3);a=l[0],t=l[1],r=l[2]}var i=this.refDataMapping[t];return s.a.createElement(E.a,{secondaryInitialSize:84,percentage:!0},s.a.createElement(A,{menuItemAction:this.menuItemClicked,showError:this.showError,createEntry:this.createEntry,refData:this.state.refData}),s.a.createElement("div",{id:"content"},this.state.displayError&&s.a.createElement(k.a,{kind:"error",className:"error-alert",onCloseButtonClick:function(t){e.setState({displayError:!1,errorMessages:[]})},title:"Error"},this.state.errorMessages.map((function(e){return s.a.createElement("span",{key:e,className:"error-alert-message"},e,s.a.createElement("br",null))}))),s.a.createElement(g.a,{active:this.state.loadingModalOpen,withOverlay:!0}),this.state.createNew?s.a.createElement(Zt,{type:this.state.createNewReferenceEntryType,save:this.entryCreated}):i?s.a.createElement(i,{key:a,api:a,name:r,type:t,size:void 0,deleteEntry:this.deleteEntry,dataUpdated:this.getRefData,displayLoadingModal:this.displayLoadingModal,showError:this.showError}):s.a.createElement(s.a.Fragment,null)))}}]),t}(n.Component);a(203);i.a.render(s.a.createElement(ea,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.250cf31c.chunk.js.map