(this["webpackJsonpref-data-management"]=this["webpackJsonpref-data-management"]||[]).push([[0],{167:function(e,t,a){e.exports=a(312)},176:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"sets",(function(){return je})),a.d(r,"maps",(function(){return Ce})),a.d(r,"map_of_sets",(function(){return _e})),a.d(r,"tables",(function(){return Ae})),a.d(r,"setAddItem",(function(){return De})),a.d(r,"setBulkAddItems",(function(){return Te})),a.d(r,"setImportItems",(function(){return Ne})),a.d(r,"mapAddItem",(function(){return Le})),a.d(r,"mapBulkAddItems",(function(){return Re})),a.d(r,"mapImportItems",(function(){return Ve})),a.d(r,"map_of_setsAddItem",(function(){return Me})),a.d(r,"map_of_setsAddInnerItem",(function(){return Ke})),a.d(r,"map_of_setsImportItems",(function(){return Fe})),a.d(r,"map_of_setsBulkAddItems",(function(){return Pe})),a.d(r,"tableAddItem",(function(){return Be})),a.d(r,"tableAddInnerItem",(function(){return ze})),a.d(r,"tableImportItems",(function(){return Ue})),a.d(r,"tableBulkAddItems",(function(){return qe}));var n=a(0),s=a.n(n),l=a(35),i=a.n(l),o=a(16),u=a(3),c=a.n(u),p=a(6),d=a(10),h=a(11),f=a(12),m=a(8),y=a(7),v=a(13),b=a(163),k=a(333),g=a(339),E=a(334),x=a(153),w=a.n(x),S=(a(175),a(176),a(321)),I=a(313),O=a(322),j=a(314),C=a(323),_=a(324),A=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={searchText:""},a.toggleMenu=a.toggleMenu.bind(Object(y.a)(a)),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.matchSearch=a.matchSearch.bind(Object(y.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"toggleMenu",value:function(e){var t=this.props.refData;t[e].isOpen=!t[e].isOpen,this.setState({entries:t})}},{key:"matchSearch",value:function(e){var t=this.state.searchText;try{var a=new RegExp(t,"i");return e.match(a)}catch(r){return e.toLowerCase().includes(t.toLowerCase())}}},{key:"handleChange",value:function(e){var t=this;Object.keys(this.props.refData).map((function(e){return t.props.refData[e].isOpen=!0})),this.setState({searchText:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ref-data-menu"},s.a.createElement("div",{className:"ref-data-menu-search-wrapper"},s.a.createElement(S.a,{type:"text",placeholder:"Search",onChange:this.handleChange,value:this.state.searchText,className:"ref-data-menu-search"})),s.a.createElement(I.a,null,Object.keys(this.props.refData).map((function(t){return s.a.createElement(O.a,{open:e.props.refData[t].isOpen,title:e.props.refData[t].label,className:"ref-data-menu-title",onClick:function(){return e.toggleMenu(t)}},s.a.createElement(j.a,{kind:"primary",size:"small",className:"btn-default btn-create",onClick:function(a){return e.props.createEntry(a,t)},key:"btn-"+t},"Create New"),s.a.createElement(C.a,{className:"ref-data-menu-list"},Object.keys(e.props.refData[t].nodes).map((function(a){if(!e.matchSearch(a))return s.a.createElement(s.a.Fragment,null);var r=e.props.refData[t].nodes[a];return s.a.createElement(j.a,{kind:"ghost",size:"small",key:r.label,className:"ref-data-menu-entry",onClick:function(t){return e.props.menuItemAction(t,r)}},r.label,s.a.createElement(_.a,{className:"ref-data-menu-entry-badge"},r.size||"0"))}))))}))))}}]),t}(n.Component),D=a(66),T=a(154),N=a.n(T),L=a(38),R=a(155),V=a.n(R),M={apiRoot:"/api",refDataApi:"/reference_data/",rulesApi:"analytics/",ruleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=edit&appName=qradar&pageId=rulewizard&ruleId=",newRuleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=new&appName=qradar&pageId=rulewizard&type=",rulesSummary:"/console/do/rulewizard/maintainRules?dispatch=getAllRules&appName=qradar&pageId=RulesWizardExistingRules&summary=true",cepsSummary:"/console/do/core/genericsearchlist?appName=qradar&pageId=ArielPropertiesList",logSourcesSummary:"/console/do/core/genericsearchlist?appName=eventviewer&pageId=SensorDeviceList",aqlSearch:"/console/qradar/jsp/ArielSearchWrapper.jsp?"+encodeURI("url=do/ariel/arielSearch?"),aqlSearchDefaults:encodeURIComponent("appName=EventViewer&pageId=EventList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),aqlSearchDefaultsFlow:encodeURIComponent("appName=Surveillance&pageId=FlowList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),cepSearch:"/console/do/qradar/arielProperties?",cepSearchDefaults:"appName=qradar&pageId=ArielPropertiesList&dispatch=edit&id=",popupSettings:"status=yes,scrollbars=yes,resizable=yes,",axiosHeaders:{"Content-Type":"text/plain",Version:"10.1"},colors:{cepForce:"#0530ad",cep:"#0062ff",lst:"#054719",bb:"#da1e28",rule:"#750e13",font:"white",fontDisabled:"lightgray",edge:"#a2b5ce",qradarBlue:"#4178be"},fontFace:'"IBM Helvetica Neue", "Helvetica Neue", Helvetica, Arial, Roboto, sans-serif'},K=function(e){return e?encodeURIComponent(encodeURIComponent(e)):void 0},F=!1,P="";try{var B=L.QRadar.getCurrentUser();B&&!B.error&&(F=!0),P=L.QRadar.getCookie(L.QRadar.QRADAR_CSRF)}catch(ca){}function z(e,t,a,r,n){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(c.a.mark((function e(t,a,r,n,s){var l,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=N.a.create(),(i=Object.assign({},M.axiosHeaders,s||{})).Version="8",l.defaults.timeout=6e5,o=Math.ceil(1e3*Math.random()),console.time("".concat(o,": ").concat(t," ").concat(a)),u={data:[]},F&&(i[L.QRadar.QRADAR_CSRF]=P),e.prev=8,e.next=11,l.request({method:t,url:M.apiRoot+a+(r?"?"+V.a.stringify(r):""),data:n||{},headers:i});case 11:u=e.sent,e.next=23;break;case 14:if(e.prev=14,e.t0=e.catch(8),console.fail("Failed loading data from ".concat(a)),console.timeEnd("".concat(o,": ").concat(t," ").concat(a)),e.t0.response&&e.t0.response.data){e.next=22;break}return e.abrupt("return",{error:e.t0,message:"Failed performing the requested network operation"});case 22:return e.abrupt("return",{error:e.t0,message:e.t0.response.data.message});case 23:return console.timeEnd("".concat(o,": ").concat(t," ").concat(a)),e.abrupt("return",u.data);case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function q(e,t,a,r){return H.apply(this,arguments)}function H(){return(H=Object(p.a)(c.a.mark((function e(t,a,r,n){var s,l,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"GET","id, status, message",s=a,l=a.status,i=0,o=setInterval(Object(p.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i++,!("CANCELLED"===l||"CANCELING"===l||"EXCEPTION"===l||"CONFLICT"===l||i>50)){e.next=6;break}clearInterval(o),r({error:!0,message:s.message}),e.next=19;break;case 6:if("COMPLETED"!==l){e.next=15;break}if(clearInterval(o),!n){e.next=12;break}return e.next=11,z("GET",t+"/results",{});case 11:s=e.sent;case 12:r(s),e.next=19;break;case 15:return e.next=17,z("GET",t,{fields:"id, status, message"});case 17:s=e.sent,l=s.status;case 19:case"end":return e.stop()}}),e)}))),2e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return G.apply(this,arguments)}function G(){return(G=Object(p.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/reference_data/".concat(t),"GET",e.next=4,z("GET",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return W.apply(this,arguments)}function W(){return(W=Object(p.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/reference_data/".concat(t),"POST",e.next=4,z("POST",r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,a){return Z.apply(this,arguments)}function Z(){return(Z=Object(p.a)(c.a.mark((function e(t,a,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/").concat(K(a)),"GET",e.next=4,z("GET",n,void 0,void 0,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a,r){return $.apply(this,arguments)}function $(){return($=Object(p.a)(c.a.mark((function e(t,a,r,n){var s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="/reference_data/".concat(t,"/").concat(K(a),"/dependents"),l="GET",i="status, id, message",e.prev=2,a){e.next=5;break}throw new Error;case 5:return e.next=7,z(l,s,{fields:i});case 7:if((o=e.sent)&&o.id){e.next=10;break}throw new Error;case 10:if(u=o.status||"CANCELLED","maps"===t?t="map":"sets"===t&&(t="set"),p="/reference_data/".concat(t,"_dependent_tasks/").concat(o.id),!n){e.next=17;break}return e.abrupt("return",o);case 17:q(p,u,r,!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),r({error:e.t0,message:"Unable to load dependents"});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))).apply(this,arguments)}function ee(e,t,a){return te.apply(this,arguments)}function te(){return(te=Object(p.a)(c.a.mark((function e(t,a,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/").concat(K(a)),"POST",e.next=4,z("POST",n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t,a,r){return re.apply(this,arguments)}function re(){return(re=Object(p.a)(c.a.mark((function e(t,a,r,n){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/reference_data/".concat(t,"/").concat(K(a),"/").concat(K(r)),"DELETE",e.next=4,z("DELETE",s,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,a,r){return se.apply(this,arguments)}function se(){return(se=Object(p.a)(c.a.mark((function e(t,a,r,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(t,a,r,!0,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(p.a)(c.a.mark((function e(t,a,r){var n,s,l,i,o,u,p,d=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>3&&void 0!==d[3]&&d[3],s=d.length>4&&void 0!==d[4]&&d[4],l="/reference_data/".concat(t,"/").concat(K(a)),i="DELETE",e.prev=4,a){e.next=7;break}throw new Error;case 7:return e.next=9,z(i,l,{purge_only:n});case 9:if((o=e.sent)&&o.id){e.next=12;break}throw new Error;case 12:if(u=o.status,"maps"===t?t="map":"sets"===t&&(t="set"),p="/reference_data/".concat(t,"_delete_tasks/").concat(o.id),r&&!s){e.next=19;break}return e.abrupt("return",o);case 19:q(p,u,r);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),r({error:e.t0,message:e.t0.message||"Unable to delete Reference Data"});case 25:case"end":return e.stop()}}),e,null,[[4,22]])})))).apply(this,arguments)}function oe(e,t,a,r,n){return ue.apply(this,arguments)}function ue(){return(ue=Object(p.a)(c.a.mark((function e(t,a,r,n,s){var l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="/reference_data/".concat(t,"/").concat(K(a),"/").concat(K(r),"/").concat(K(n)),"DELETE",e.next=4,z("DELETE",l,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,a){return pe.apply(this,arguments)}function pe(){return(pe=Object(p.a)(c.a.mark((function e(t,a,r){var n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t,"/bulk_load/").concat(K(a)),"POST",(s={})["Content-Type"]="application/json",e.next=6,z("POST",n,{},r,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de,he=a(93),fe=a.n(he);function me(){return ye.apply(this,arguments)}function ye(){return(ye=Object(p.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de){e.next=2;break}return e.abrupt("return",de);case 2:return e.prev=2,e.next=5,L.QRadar.getCurrentUser();case 5:(t=e.sent)&&!t.error&&(de=t.username),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",de);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ve(e){var t=this.state.metaData;t.number_of_elements=e.number_of_elements,this.setState({metaData:t}),this.props.dataUpdated()}function be(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,u,p,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadDependents(),(r=this.props.size)/50>(s=5e3)&&(s=Math.ceil(r/50)),l=0,i=s;case 6:return u={Range:"items=".concat(l,"-").concat(i)},e.next=10,Y(this.props.type,this.props.name,u);case 10:if(!(n=e.sent).error){e.next=16;break}return console.log("Failed loading all elements"),this.props.showError("Unable to load all elements. ".concat(r-l," entries have not been loaded.")),this.setState({loaded:!0}),e.abrupt("return");case 16:if(p=a?[]:this.state.allEntries,a=!1,!n.data){e.next=37;break}return h=this.parseResponseData(n),p?(d=p).push.apply(d,Object(o.a)(h)):p=h,e.next=23,this.setState({allEntries:p});case 23:if(delete n.data,this.tableChanged(),!(r>i)){e.next=33;break}n.number_of_elements=i+1,this.setState({metaData:n}),l=i+1,i+=s,console.log("Loading next batch from ".concat(l," to ").concat(i)),e.next=35;break;case 33:return console.log("Done loading all elements"),e.abrupt("break",41);case 35:e.next=39;break;case 37:return console.log("Last batch did not return any new elements. Terminating"),e.abrupt("break",41);case 39:e.next=6;break;case 41:this.setState({metaData:n,loaded:!0});case 42:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ge(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){if(e.error)return a.props.showError("Unable to load dependents"),void a.setState({dependentsLoaded:!0});a.setState({dependents:e,dependentsLoaded:!0})},X(this.props.type,this.props.name,t);case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function xe(){return we.apply(this,arguments)}function we(){return(we=Object(p.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.toggleLoading(),t=function(e){a.tableChanged("new",[]),a.updateMetaData(e),a.setState({selected:[],innerSelected:{}}),a.clearSelection(),a.props.toggleLoading()},e.next=4,ne(this.props.type,this.props.name,t);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Se(e){this.setState({selected:e})}function Ie(e,t){var a=this.state.innerSelected;a[e]=t,this.setState({innerSelected:a})}function Oe(e,t,a,r){var n="";r&&(n+="parentKey,"),a&&(n+="key,"),n+="value,first_seen,last_seen,source\n";var s=!0,l=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(s=(o=u.next()).done);s=!0){var c=o.value;r&&(n+='"'+c.outer_key.replace(/"/g,'""')+'",'),a&&(n+='"'+c.key.replace(/"/g,'""')+'",'),n+='"'+c.value.replace(/"/g,'""')+'","'+c.first_seen+'","'+c.last_seen+'","'+c.source.replace(/"/g,'""')+'"\n'}}catch(d){l=!0,i=d}finally{try{s||null==u.return||u.return()}finally{if(l)throw i}}var p=new Blob([n],{type:"text/csv"});fe.a.saveAs(p,"".concat(e,".csv"))}var je={name:{value:"",type:"text",label:"Reference Set Name",help:"Required: The name of the Set to be created. Must not exist already"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"],help:"Required: The data type of the values in the new Set"},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"],help:"Optional: The value based on which new data expires from the Set"},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live",help:"Optional: If given, the entries of the set expire. Input format like '1 days', or '12 hours'"}},Ce={name:{value:"",type:"text",label:"Reference Map Name"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"",label:"Key Label",type:"text"},value_label:{value:"",label:"Value Label",type:"text"}},_e={name:{value:"",type:"text",label:"Reference Map of Sets Name"},element_type:{value:"ALN",type:"select",label:"Element Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"",label:"Key Label",type:"text"},value_label:{value:"",label:"Value Label",type:"text"}},Ae={name:{value:"",type:"text",label:"Reference Table Name",help:"Required: The name of the Table to be created. Must not exist already"},timeout_type:{value:"FIRST_SEEN",type:"select",label:"Timeout Type",options:["FIRST_SEEN","LAST_SEEN"]},time_to_live:{type:"date",options:["mons","days","hours","minutes","seconds"],value:"",label:"Time to Live"},key_label:{value:"Outer Key Label",label:"Key Label",type:"text"},element_type:{value:"ALN",type:"select",label:"Key Type",options:["ALN","NUM","IP","PORT","ALNIC","DATE"]},inner_labels:{label:"Inner Keys",options:["ALN","NUM","IP","PORT","ALNIC","DATE"],type:"list",values:{"Inner Key 1":{label:"Inner Key 1",type:"ALN"}}}},De={value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Te={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Ne={file:{label:"File",value:"",type:"file"},bulkAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Le={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Re={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:"New lines are implicit separators",type:"text"}},Ve={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:"New lines are implicit separators",type:"text"}},Me={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},Ke={value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Fe={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},Pe={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},Be={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:"New lines are implicit separators",type:"text"}},ze={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:"Comment",type:"text"}},Ue={file:{label:"File",value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},qe={bulkAddData:{label:"Entries",value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:"New lines are implicit separators",type:"text"}},He=a(55),Je=a(156),Ge=a.n(Je);function Qe(e){return Ge()(e,"dd/mmm/yyyy, hh:MM:ss TT")}var We=[{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:Qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:Qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],Ye=[{key:"key",header:"Key",sort:!0,style:{wordBreak:"break-all"}},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:Qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:Qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],Ze=[{key:"key",header:"Key",sort:!0,style:{width:"10000px",wordBreak:"break-all"}}],Xe=[{key:"key",header:"Key",sort:!0,hidden:!0},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:Qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:Qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],$e=[{key:"key",header:"Key",sort:!0,style:{width:"10000px",wordBreak:"break-all"}}],et=[{key:"parentKey",header:"Key",sort:!0,hidden:!0},{key:"key",header:"Inner Key",sort:!0,style:{wordBreak:"break-all"}},{key:"value",header:"Value",sort:!0,style:{wordBreak:"break-all"}},{key:"first_seen",header:"First Seen",sort:!0,formatter:Qe},{key:"last_seen",header:"Last Seen",sort:!0,formatter:Qe},{key:"source",header:"Source",sort:!0,style:{wordBreak:"break-all"}}],tt=a(325),at=a(326),rt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).lookup={map:"Map",set:"Set",map_of_sets:"Map of Sets",table:"Table"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data.key_name_types&&"";if(void 0!==e)for(var t in this.props.data.key_name_types)e+=this.props.data.key_name_types[t]+" ("+t+"), ";return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{kind:"danger",size:"small",className:"btn-default btn-delete btn-right btn-top",onClick:this.props.deleteEntry},"Delete ",this.lookup[this.props.typeLabel]||"Data"),s.a.createElement(j.a,{kind:"danger",size:"small",className:"btn-default btn-delete btn-right btn-top-second",onClick:this.props.purgeData},"Clear Data"),this.props.data.name?s.a.createElement(tt.e,{className:"ref-data-meta-data"},s.a.createElement(tt.c,null,s.a.createElement(tt.d,{head:!0},s.a.createElement(tt.b,{head:!0,className:"ref-data-meta-data-title"},this.props.data.name))),s.a.createElement(tt.a,null,s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry"},"Number of Elements: ",s.a.createElement(_.a,{type:"gray"},this.props.data.number_of_elements||0))),s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry"},"Creation Time: ",this.props.data.creation_time?Qe(this.props.data.creation_time):"")),s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry"},"Timeout Type: ",this.props.data.timeout_type)),e&&s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry"},"Key Types: ",e)),s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry"},"Value Type: ",this.props.data.element_type)),s.a.createElement(tt.d,null,s.a.createElement(tt.b,{className:"ref-data-meta-data-entry",F:!0},"Time To Live: ",this.props.data.time_to_live?function(e){var t="",a=e.split(/(\S+\s\S+)/).filter((function(e){return e.trim()})),r=!0,n=!1,s=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;0!=o.split(/\s/)[0]&&(t+=" "+o)}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return t}(this.props.data.time_to_live):"Infinitly")))):s.a.createElement(at.a,{className:"ref-data-meta-data"}))}}]),t}(n.Component),nt=a(98),st=a(157),lt=a.n(st),it=a(99),ot=a.n(it),ut=a(100),ct=a.n(ut),pt=(n.Component,a(5)),dt=a(335),ht=a(94),ft=a(95),mt=a(96),yt=a(337),vt=dt.a.TableContainer,bt=dt.a.Table,kt=dt.a.TableHead,gt=dt.a.TableRow,Et=dt.a.TableBody,xt=dt.a.TableCell,wt=dt.a.TableHeader,St=dt.a.TableToolbar,It=(dt.a.TableToolbarAction,dt.a.TableSelectAll),Ot=dt.a.TableSelectRow,jt=dt.a.TableBatchActions,Ct=dt.a.TableBatchAction,_t=dt.a.TableToolbarContent,At=dt.a.TableToolbarSearch,Dt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).handleOnSelect=function(e,t){var r;r=t?[].concat(Object(o.a)(a.state.selected),[e.id]):a.state.selected.filter((function(t){return t!==e.id})),a.setState({selected:r}),a.props.innerTable?a.props.selectionChanged(e.outer_key||e.key,r):a.props.selectionChanged(r)},a.handleOnSelectAll=function(e,t){var r,n=t.map((function(e){return e.id}));r=e?n:[],a.setState({selected:r}),a.props.innerTable?a.props.selectionChanged(t[0].outer_key||t[0].key,r):a.props.selectionChanged(r)},a.state={selected:[],currentPageSize:10,firstRowIndex:0},a.clearSelection=a.clearSelection.bind(Object(y.a)(a)),a.props.innerTable?a.props.selectionClearedCallback(a.props.parent.key,a.clearSelection):a.props.selectionClearedCallback(a.clearSelection),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"clearSelection",value:function(){this.setState({selected:[]})}},{key:"render",value:function(){var e=this;return console.log(this.props.data),s.a.createElement(dt.a,{useZebraStyles:!0,isSortable:!0,rows:this.props.data.slice(this.state.firstRowIndex,this.state.firstRowIndex+this.state.currentPageSize),headers:this.props.columns,render:function(a){var r=a.rows,n=a.headers,l=a.getHeaderProps,i=a.onInputChange,o=a.getBatchActionProps,u=(a.selectedRows,a.getSelectionProps),c=a.getRowProps;return s.a.createElement(vt,null,s.a.createElement(St,null,s.a.createElement(jt,o(),s.a.createElement(Ct,{renderIcon:pt.l,onClick:e.props.deleteItem},"Delete")),s.a.createElement(_t,null,!e.props.innerTable&&s.a.createElement(At,{onChange:i}),s.a.createElement(j.a,{onClick:e.props.addItem,small:!0,kind:"primary"},"Add Entry"),s.a.createElement(j.a,{onClick:e.props.bulkAddItem,small:!0,kind:"primary"},"Bulk Add"),s.a.createElement(j.a,{onClick:e.props.importItems,small:!0,kind:"primary"},"Import CSV"))),s.a.createElement(bt,null,s.a.createElement(kt,null,s.a.createElement(gt,null,e.props.expandable&&s.a.createElement(ht.a,null),s.a.createElement(It,u()),n.map((function(e){return s.a.createElement(wt,l({header:e}),e.header)})))),s.a.createElement(Et,null,e.props.expandable&&r.map((function(a){return s.a.createElement(s.a.Fragment,{key:a.id},s.a.createElement(ft.a,c({row:a}),s.a.createElement(Ot,u({row:a})),a.cells.map((function(e){return s.a.createElement(xt,{key:e.id},e.value)}))),a.isExpanded&&s.a.createElement(mt.a,{colSpan:n.length+2},console.log(a),console.log(e.props.data),console.log(e.props.data.find((function(e){return e.key==a.id}))),function(a){return console.log(a),s.a.createElement("div",{className:"inner-table"},s.a.createElement(t,{innerTable:!0,parent:a,data:a.values,columns:e.props.extendableColumns,addItem:function(t){return e.props.addInnerItem(a)},deleteItem:function(t){return e.props.deleteInnerItem(a)},searchText:e.props.innerSearchText,selectionChanged:e.props.innerSelectionChanged,selectionClearedCallback:e.props.innerSelectionClearedCallback}))}(e.props.data.find((function(e){return e.key==a.id})))))})),!e.props.expandable&&r.map((function(e){return s.a.createElement(gt,{key:e.id},s.a.createElement(Ot,u({row:e})),e.cells.map((function(e){return s.a.createElement(xt,{key:e.id},e.value)})))})))),s.a.createElement(yt.a,{page:1,pageSize:e.state.currentPageSize,pageSizes:[10,20,30,40,50],totalItems:e.props.data.length,onChange:function(t){var a=t.page,r=t.pageSize;r!==e.state.currentPageSize&&e.setState({currentPageSize:r}),e.setState({firstRowIndex:r*(a-1)})}}))}})}}]),t}(n.Component),Tt=a(327),Nt=dt.a.Table,Lt=dt.a.TableHead,Rt=dt.a.TableRow,Vt=dt.a.TableBody,Mt=dt.a.TableCell,Kt=dt.a.TableHeader;var Ft=function(e){var t;return t=e.dependents&&e.dependents.length>0?e.dependents.map((function(e){return{id:String(Math.random()),dependent:"("+e.dependent_type+")"+e.dependent_name}})):[{id:"0",dependent:"This ReferenceData appears to not have any data depending on it"}],e.loaded?s.a.createElement(dt.a,{className:"ref-data-dependents",headers:[{header:"Dependents",key:"dependent"}],rows:t,useZebraStyles:!0,render:function(e){var t=e.rows,a=e.headers,r=e.getTableProps,n=e.getHeaderProps,l=e.getRowProps;return s.a.createElement(Nt,r(),s.a.createElement(Lt,null,s.a.createElement(Rt,null,a.map((function(e){return s.a.createElement(Kt,n({header:e}),e.header)})))),s.a.createElement(Vt,null,t.map((function(e){return s.a.createElement(Rt,Object.assign({key:e.id},l({row:e})),e.cells.map((function(e){return s.a.createElement(Mt,{key:e.id},e.value)})))}))))}}):s.a.createElement(Tt.a,{headers:["Dependents"],columnCount:1,rowCount:1})},Pt=a(340),Bt=a(328),zt=a(329),Ut=a(338),qt=a(330),Ht=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(f.a)(this,Object(m.a)(t).call(this,e)),console.log(a.props),a.state={entries:a.props.entries,filename:"",show:!1},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.save=a.save.bind(Object(y.a)(a)),a.closeModal=a.closeModal.bind(Object(y.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.props.modal!==this.state.show&&(console.log(this.props.entries),this.setState({entries:JSON.parse(JSON.stringify(this.props.entries)),show:this.props.modal,filename:""}))}},{key:"handleChange",value:function(e,t){var a=this.state.entries,r=this.state.filename;"file"===e.target.type?(a[t].value=e.target.files.item(0),r=e.target.files.item(0).name):a[t].value=e.target.value,this.setState({entries:a,filename:r})}},{key:"save",value:function(e){this.props.save(this.state.entries),this.closeModal(e)}},{key:"closeModal",value:function(e){this.setState({entries:JSON.parse(JSON.stringify(this.props.entries)),filename:"",show:!1}),this.props.closeModal()}},{key:"render",value:function(){var e=this;return s.a.createElement(g.a,{size:"sm",open:this.props.modal,onRequestSubmit:this.save,onRequestClose:this.closeModal,modalHeading:this.props.headerLabel||"Add Entries",primaryButtonText:this.props.saveLabel||"Save",secondaryButtonText:"Close"},Object.keys(this.state.entries).map((function(t){return s.a.createElement(tt.e,{className:"ref-data-input-modal-entry",key:t},s.a.createElement(tt.a,null,s.a.createElement(tt.d,null,e.state.entries[t].help?s.a.createElement(Pt.a,{direction:"right",triggerText:e.state.entries[t].label},e.state.entries[t].help):s.a.createElement(Bt.a,null,e.state.entries[t].label)),s.a.createElement(tt.d,null,"file"===e.state.entries[t].type&&s.a.createElement(zt.a,{labelText:e.state.filename||"Drag and drop file here or click to upload",onChange:function(a){return e.handleChange(a,t)}}),"text"===e.state.entries[t].type&&s.a.createElement(Ut.a,{id:t,onChange:function(a){return e.handleChange(a,t)},value:e.state.entries[t].value}),"textarea"===e.state.entries[t].type&&s.a.createElement(qt.a,{id:t,value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}}))))})))}}]),t}(n.Component),Jt=function(e){function t(e,a){var r;return Object(d.a)(this,t),(r=Object(f.a)(this,Object(m.a)(t).call(this,e))).type=a,r.columns={set:We,map:Ye,map_of_sets:Ze,map_of_setsInner:Xe,table:$e,tableInner:et},r.state={selected:[],innerSelected:{},metaData:{},allEntries:[],tableData:[],loaded:!1,searchText:"",innerSearchText:"",modalInputDefinition:{}},r.clearInnerSelection={},r.addItem=r.addItem.bind(Object(y.a)(r)),r.deleteItem=r.deleteItem.bind(Object(y.a)(r)),r.bulkAddItems=r.bulkAddItems.bind(Object(y.a)(r)),r.importItems=r.importItems.bind(Object(y.a)(r)),r.exportItems=r.exportItems.bind(Object(y.a)(r)),r.clickAddItem=r.clickAddItem.bind(Object(y.a)(r)),r.clickDeleteItem=r.clickDeleteItem.bind(Object(y.a)(r)),r.clickBulkAddItem=r.clickBulkAddItem.bind(Object(y.a)(r)),r.clickImportItems=r.clickImportItems.bind(Object(y.a)(r)),r.clickAddInnerItem=r.clickAddInnerItem.bind(Object(y.a)(r)),r.clickDeleteInnerItem=r.clickDeleteInnerItem.bind(Object(y.a)(r)),r.tableChanged=r.tableChanged.bind(Object(y.a)(r)),r.updateMetaData=ve.bind(Object(y.a)(r)),r.loadData=be.bind(Object(y.a)(r)),r.loadDependents=ge.bind(Object(y.a)(r)),r.purgeData=xe.bind(Object(y.a)(r)),r.selectionChanged=Se.bind(Object(y.a)(r)),r.innerSelectionChanged=Ie.bind(Object(y.a)(r)),r.loadData(r.props.api),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"deleteItem",value:function(){}},{key:"bulkAddItems",value:function(){}},{key:"importItems",value:function(){}},{key:"exportItems",value:function(){}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.toggleLoading(),e.next=3,ee(this.props.type,this.props.name,t);case 3:a=e.sent,r=this.updateData(this.state.allEntries,t,!0),a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.toggleLoading();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clickAddItem",value:function(){this.setState({showInputModal:!0,modalSave:this.addItem,modalInputDefinition:r[this.type+"AddItem"]})}},{key:"clickDeleteItem",value:function(){this.deleteItem(this.state.selected),this.setState({selected:[]}),this.clearSelection()}},{key:"clickBulkAddItem",value:function(){this.setState({showInputModal:!0,modalSave:this.bulkAddItems,modalInputDefinition:r[this.type+"BulkAddItems"]})}},{key:"clickImportItems",value:function(){this.setState({showInputModal:!0,modalSave:this.importItems,modalInputDefinition:r[this.type+"ImportItems"]})}},{key:"clickAddInnerItem",value:function(e){var t=this;this.setState({showInputModal:!0,modalSave:function(a){return t.addInnerItem(e,a)},modalInputDefinition:r[this.type+"AddInnerItem"]})}},{key:"clickDeleteInnerItem",value:function(e){this.deleteInnerItem(e,this.state.innerSelected[e.key]);var t=this.state.innerSelected;t[e.key]=[],this.setState({innerSelected:t}),this.clearInnerSelection[e.key]()}},{key:"tableChanged",value:function(e,t){var a=this.state.allEntries,r=this.state.searchText;"search"===e&&t&&(r=t.searchText),"new"===e&&t&&(a=t);var n=[],s=!1;try{r=new RegExp(r,"gi"),s=!0}catch(ca){}var l=0,i=!0,o=!1,u=void 0;try{for(var c,p=a[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var d=c.value;this.testValue(d,r,s)&&(d.index=l++,n.push(d))}}catch(h){o=!0,u=h}finally{try{i||null==p.return||p.return()}finally{if(o)throw u}}this.setState({tableData:n,searchText:r,allEntries:a})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ht,{modal:this.state.showInputModal,save:this.state.modalSave,entries:JSON.parse(JSON.stringify(this.state.modalInputDefinition)),closeModal:function(t){return e.setState((function(e){return{showInputModal:!e.showInputModal}}))}}),s.a.createElement(rt,{data:this.state.metaData,typeLabel:this.type,deleteEntry:this.props.deleteEntry,purgeData:this.purgeData}),this.state.loaded?s.a.createElement(Dt,{tableChanged:this.tableChanged,data:this.state.tableData,columns:this.columns[this.type],type:this.type,addItem:this.clickAddItem,bulkAddItem:this.clickBulkAddItem,importItems:this.clickImportItems,exportItems:this.exportItems,deleteItem:this.clickDeleteItem,searchText:this.state.searchText,selectionChanged:this.selectionChanged,selectionClearedCallback:function(t){return e.clearSelection=t},expandable:["map_of_sets","table"].includes(this.type),extendableColumns:this.columns[this.type+"Inner"],addInnerItem:this.clickAddInnerItem,deleteInnerItem:this.clickDeleteInnerItem,innerSearchText:this.state.innerSearchText,innerSelectionChanged:this.innerSelectionChanged,innerSelectionClearedCallback:function(t,a){return e.clearInnerSelection[t]=a}}):s.a.createElement(Tt.a,{rowCount:10,columnCount:this.columns[this.type].length}),s.a.createElement("div",{className:"separator"}),s.a.createElement(Ft,{dependents:this.state.dependents,loaded:this.state.dependentsLoaded}))}}]),t}(n.Component),Gt=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,e,"set"))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddSeparator:t.bulkAddSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){Oe(this.props.name,this.state.allEntries)}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(a){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value.value){e.next=3;break}return this.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return e.next=5,me();case 5:r=e.sent,n={value:a.value.value,source:a.source.value||r},Object(D.a)(Object(m.a)(t.prototype),"addItem",this).call(this,n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=7,i=t[Symbol.iterator]();case 9:if(n=(o=i.next()).done){e.next=18;break}return u=o.value,e.next=13,ae(this.props.type,this.props.name,u);case 13:a=e.sent,r=this.updateData(r,{value:u},!1);case 15:n=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,l=e.t0;case 24:e.prev=24,e.prev=25,n||null==i.return||i.return();case 27:if(e.prev=27,!s){e.next=30;break}throw l;case 30:return e.finish(27);case 31:return e.finish(24);case 32:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.toggleLoading();case 34:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.toggleLoading(),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddSeparator.value).split(t.bulkAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),a=Object(o.a)(new Set(a)),r=a.map((function(e){return{value:e,id:e,source:"reference data api"}})),e.next=6,ce(this.props.type,this.props.name,a);case 6:(n=e.sent).error?this.props.showError(n.message):(l=this.state.allEntries,(s=l).push.apply(s,Object(o.a)(r)),l=l.filter((function(e,t,a){return t===a.findIndex((function(t){return t.value===e.value}))})),this.tableChanged("new",l),this.updateMetaData(n)),this.props.toggleLoading();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a){var r=e;a?-1===r.findIndex((function(e){return t.value===e.value}))&&r.push({value:t.value,id:t.value,source:t.source}):r=r.filter((function(e){return e.value!==t.value}));return r}},{key:"parseResponseData",value:function(e){var t=[];return e.number_of_elements>0&&e.data.forEach((function(e){void 0!==e.value&&(e.id=e.value,t.push(e))})),t}},{key:"testValue",value:function(e,t,a){if(!e.value)return!1;return a?e.value.match(t):e.value.toLowerCase().includes(t.toLowerCase())}}]),t}(Jt),Qt=a(37),Wt=a(45),Yt=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,e,"map"))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){Oe(this.props.name,this.state.allEntries,!0)}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(a){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value.value&&a.key.value){e.next=3;break}return this.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return e.next=5,me();case 5:r=e.sent,n={key:a.key.value,value:a.value.value,source:a.source.value||r},Object(D.a)(Object(m.a)(t.prototype),"addItem",this).call(this,n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.value,n=r.findIndex((function(e){return e.key===t})),e.next=4,ae(p.props.type,p.props.name,t,{value:r[n].value});case 4:a=e.sent,r=p.updateData(r,{key:t},!1);case 6:case"end":return e.stop()}}),e)})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.toggleLoading();case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,u,p,d,h,f,m,y,v,b,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.toggleLoading(),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=[],n={},s=!0,l=!1,i=void 0,e.prev=7,u=a[Symbol.iterator]();!(s=(p=u.next()).done);s=!0)d=p.value,h=d.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),f=Object(Wt.a)(h,2),m=f[0],y=f[1],n[m]=y,r.push({key:m,value:y,id:m,source:"reference data api"});e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),l=!0,i=e.t0;case 15:e.prev=15,e.prev=16,s||null==u.return||u.return();case 18:if(e.prev=18,!l){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return r=r.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),e.next=26,ce(this.props.type,this.props.name,n);case 26:(v=e.sent).error?this.props.showError(v.message):(k=this.state.allEntries,(b=k).push.apply(b,Object(o.a)(r)),k=k.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),this.tableChanged("new",k),this.updateMetaData(v)),this.props.toggleLoading();case 29:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a){var r=e;return a?r.push({key:t.key,value:t.value,id:t.key,source:t.source}):r=r.filter((function(e){return e.key!==t.key})),r=r.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),r}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)void 0!==a&&t.push(Object(Qt.a)({key:a},e.data[a],{id:a}));return t}}},{key:"testValue",value:function(e,t,a){if(!e.value||!e.key)return!1;return a?e.value.match(t)||e.key.match(t):e.value.toLowerCase().includes(t.toLowerCase())||e.key.toLowerCase().includes(t.toLowerCase())}}]),t}(Jt),Zt=a(65),Xt=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,e,"map_of_sets"))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.keyAddDataValues.value.replace(/\r?\n/g,t.keyAddSeparator.value).split(t.keyAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=t.keyAddDataKey.value,n=Object(Zt.a)({},r,a),e.next=5,ce(this.props.type,this.props.name,n);case 5:(s=e.sent)&&(l=this.updateData(this.state.allEntries,{key:r,values:a,source:"reference data api"},!0,!0),this.tableChanged("new",l),this.updateMetaData(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),r=this.state.tableData,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n,s,l,i,o,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,n=r.findIndex((function(e){return e.key===t})),s=!0,l=!1,i=void 0,e.prev=5,o=r[n].values[Symbol.iterator]();case 7:if(s=(d=o.next()).done){e.next=16;break}return h=d.value,e.next=11,ae(p.props.type,p.props.name,t,{value:h.value});case 11:a=e.sent,r=p.updateData(r,{key:t},!1,!0);case 13:s=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),l=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==o.return||o.return();case 25:if(e.prev=25,!l){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,null,[[5,18,22,30],[23,,25,29]])})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.toggleLoading();case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:if(r=e.sent,n={value:a.value.value,key:t.key,source:a.source.value||r},s=this.state.allEntries.findIndex((function(e){return e.key===t.key})),-1===this.state.allEntries[s].values.findIndex((function(e){return e.value===a.value.value}))){e.next=9;break}return console.log("Value already in table. Skipping"),this.props.showError("Value already in table."),e.abrupt("return");case 9:return this.props.toggleLoading(),e.next=12,ee(this.props.type,this.props.name,n);case 12:l=e.sent,i=this.updateData(this.state.allEntries,n,!0),l.error?this.props.showError(l.message):(this.tableChanged("new",i),this.updateMetaData(l)),this.props.toggleLoading();case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),n=this.state.allEntries,s=!0,l=!1,i=void 0,e.prev=7,o=a[Symbol.iterator]();case 9:if(s=(u=o.next()).done){e.next=18;break}return p=u.value,e.next=13,ae(this.props.type,this.props.name,t.key,{value:p});case 13:r=e.sent,n=this.updateData(n,{key:t.key,value:p},!1);case 15:s=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),l=!0,i=e.t0;case 24:e.prev=24,e.prev=25,s||null==o.return||o.return();case 27:if(e.prev=27,!l){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:r.error?this.props.showError(r.message):(this.tableChanged("new",n),this.updateMetaData(r)),this.props.toggleLoading();case 34:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a,r){if(r)if(a){var n=e.findIndex((function(e){return e.key===t.key}));if(-1===n){var s=Object(o.a)(new Set(t.values));s=s.map((function(e){return{value:e,id:e,key:t.key,source:t.source}})),e.push({key:t.key,values:s,id:t.key})}else{var l=!0,i=!1,u=void 0;try{for(var c,p=function(){var a=c.value;-1===e[n].values.findIndex((function(e){return e.value===a}))&&e[n].values.push({value:a,id:a,key:t.key,source:t.source})},d=t.values[Symbol.iterator]();!(l=(c=d.next()).done);l=!0)p()}catch(f){i=!0,u=f}finally{try{l||null==d.return||d.return()}finally{if(i)throw u}}}}else e=e.filter((function(e){return e.key!==t.key}));else{var h=e.findIndex((function(e){return e.key===t.key}));-1===h?console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key"):a?e[h].values.push({value:t.value,id:t.value,key:t.key,source:t.source}):e[h].values=e[h].values.filter((function(e){return e.value!==t.value}))}return e}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){var a=function(t){e.data[t]=e.data[t].map((function(e){return Object(Qt.a)({key:t,id:e.value},e)}))};for(var r in e.data)a(r);t=Object.keys(e.data).map((function(t){return{key:t,values:e.data[t],valueLabel:e.value_label,id:t}}))}return t}},{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddValuesSeparator:t.bulkAddValuesSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p,d,h,f,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.toggleLoading(),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},n=!0,s=!1,l=void 0,e.prev=6,i=a[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)u=o.value,p=u.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),d=Object(Wt.a)(p,2),h=d[0],f=d[1],r.hasOwnProperty(h)||(r[h]={}),r[h]=f.split(t.bulkAddValuesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e}));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,l=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!s){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,ce(this.props.type,this.props.name,r);case 24:(m=e.sent).error?this.props.showError(m.message):this.updateMetaData(m),this.loadData(this.props.type,!0),this.props.toggleLoading();case 28:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var n,s=this.state.allEntries[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;e.push.apply(e,Object(o.a)(l.values))}}catch(i){a=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}Oe(this.props.name,e,!0,!1)}},{key:"testValue",value:function(e,t,a){if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var r=!0,n=!1,s=void 0;try{for(var l,i=e.values[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(a?o.value.match(t):o.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return!1}}]),t}(Jt),$t=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(m.a)(t).call(this,e,"table"))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"clickAddItem",value:function(){var e={};if(this.state.metaData)for(var t in this.state.metaData.key_name_types)e[t]={label:t,value:"",type:"text",element_type:this.state.metaData.key_name_types[t]};var a=Object(Qt.a)({outer_key:{label:this.state.metaData.key_label||"Key",value:"",type:"text"}},e,{source:{label:"Comment",value:"",type:"text"}});this.setState({showInputModal:!0,modalSave:this.addItem,modalInputDefinition:a})}},{key:"addItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.toggleLoading(),r=this.state.allEntries,n=t.outer_key.value,s=t.source.value,r=this.updateData(r,{outer_key:n,values:[]},!0,!0),this.tableChanged("new",r),delete t.outer_key,delete t.source,e.t0=c.a.keys(t);case 9:if((e.t1=e.t0()).done){e.next=18;break}if(l=e.t1.value,t[l].value){e.next=13;break}return e.abrupt("continue",9);case 13:return e.next=15,this.addInnerItem({key:n},{key:{value:l},value:{value:t[l].value},source:{value:s}},!0);case 15:a=e.sent,e.next=9;break;case 18:this.updateMetaData(a),this.props.toggleLoading();case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),r=this.state.allEntries,n=!0,s=!1,l=void 0,e.prev=7,i=c.a.mark((function e(){var t,n,s,l,i,o,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,n=r.findIndex((function(e){return e.key===t})),s=!0,l=!1,i=void 0,e.prev=5,o=r[n].values[Symbol.iterator]();case 7:if(s=(d=o.next()).done){e.next=16;break}return h=d.value,e.next=11,oe(p.props.type,p.props.name,t,h.key,{value:h.value});case 11:(a=e.sent).error?p.props.showError(a.message):r=p.updateData(r,{outer_key:t},!1,!0);case 13:s=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),l=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==o.return||o.return();case 25:if(e.prev=25,!l){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,null,[[5,18,22,30],[23,,25,29]])})),o=t[Symbol.iterator]();case 10:if(n=(u=o.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:n=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,l=e.t1;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.error?this.props.showError(a.message):(this.tableChanged("new",r),this.updateMetaData(a)),this.props.toggleLoading();case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a,r){var n,s,l,i,o,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||this.props.toggleLoading(),n=t.key,s=a.key.value,l=a.value.value,e.next=6,me();case 6:return i=e.sent,o=a.source.value||i,e.next=10,ee(this.props.type,this.props.name,{outer_key:n,inner_key:s,value:l,source:o});case 10:if(u=e.sent,p=this.updateData(this.state.allEntries,{outer_key:n,inner_key:s,value:l,source:o},!0),u.error?this.props.showError(u.message):(this.updateMetaData(u),this.tableChanged("new",p)),!r){e.next=15;break}return e.abrupt("return",u);case 15:this.props.toggleLoading();case 16:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"deleteInnerItem",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var r,n,s,l,i,o,u,p,d=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.length){e.next=2;break}return e.abrupt("return");case 2:this.props.toggleLoading(),n=this.state.allEntries,s=!0,l=!1,i=void 0,e.prev=7,o=c.a.mark((function e(){var a,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.value,s=n.findIndex((function(e){return e.key===t.key})),l=n[s].values.findIndex((function(e){return e.key===a})),e.next=5,oe(d.props.type,d.props.name,t.key,a,{value:n[s].values[l].value});case 5:r=e.sent,n=d.updateData(n,{outer_key:t.key,inner_key:a},!1,!1);case 7:case"end":return e.stop()}}),e)})),u=a[Symbol.iterator]();case 10:if(s=(p=u.next()).done){e.next=15;break}return e.delegateYield(o(),"t0",12);case 12:s=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),l=!0,i=e.t1;case 21:e.prev=21,e.prev=22,s||null==u.return||u.return();case 24:if(e.prev=24,!l){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:r.error?this.props.showError(r.message):(this.tableChanged("new",n),this.updateMetaData(r)),this.props.toggleLoading();case 31:case"end":return e.stop()}}),e,this,[[7,17,21,29],[22,,24,28]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e,t,a,r){if(r)if(a){if(-1!==e.findIndex((function(e){return e.key===t.outer_key})))return;e.push({key:t.outer_key,values:t.values,id:t.outer_key})}else e=e.filter((function(e){return e.key!==t.outer_key}));else{var n=e.findIndex((function(e){return e.key===t.outer_key}));if(-1===n)console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key");else{var s=e[n].values.findIndex((function(e){return e.key===t.inner_key}));a?-1===s?e[n].values.push({outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}):e[s].values[s]={outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}:e[n].values.splice(s,1)}}return e}},{key:"parseResponseData",value:function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)for(var r in e.data[a])e.data[a][r]=Object(Qt.a)({outer_key:a,key:r,id:r},e.data[a][r]);t=Object.keys(e.data).map((function(t){return{key:t,values:Object.values(e.data[t]),id:t}}))}return t}},{key:"importItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onloadend=function(){var e=a.result,n={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};r.bulkAddItems(n)},a.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"bulkAddItems",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l,i,o,u,p,d,h,f,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.toggleLoading(),a=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},n=!0,s=!1,l=void 0,e.prev=6,i=a[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)u=o.value,p=u.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),d=Object(Wt.a)(p,3),h=d[0],f=d[1],m=d[2],r.hasOwnProperty(h)||(r[h]={}),r[h][f]=m;e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,l=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!s){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,ce(this.props.type,this.props.name,r);case 24:(y=e.sent).error?this.props.showError(y.message):this.updateMetaData(y),this.loadData(this.props.type,!0),this.props.toggleLoading();case 28:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"exportItems",value:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var n,s=this.state.allEntries[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;e.push.apply(e,Object(o.a)(l.values))}}catch(i){a=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}Oe(this.props.name,e,!0,!0)}},{key:"testValue",value:function(e,t,a){try{if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var r=!0,n=!1,s=void 0;try{for(var l,i=e.values[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(a?o.value.match(t):o.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(u){n=!0,s=u}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}}catch(ca){return!1}return!1}}]),t}(Jt),ea=a(331),ta=a(332),aa=a(336),ra=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={type:a.props.type,entries:JSON.parse(JSON.stringify(r[a.props.type]))},a.typeLookup={tables:"Table",map_of_sets:"Map of Sets",sets:"Set",maps:"Map"},a.handleChange=a.handleChange.bind(Object(y.a)(a)),console.log(r[a.props.type]),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.state.type!==this.props.type&&(console.log(r[this.props.type]),this.setState({type:this.props.type,entries:JSON.parse(JSON.stringify(r[this.props.type]))}))}},{key:"handleChange",value:function(e,t){var a=this.state.entries;a[t].value=e.target.value,this.setState({entries:a})}},{key:"handleDropdownChange",value:function(e,t){var a=this.state.entries;a[t].value=e.selectedItem,this.setState({entries:a})}},{key:"render",value:function(){var e=this;return console.log(this.state.entries),s.a.createElement(ea.a,{className:"ref-data-create-entry"},s.a.createElement(ta.a,{legendText:"Add new Reference "+this.typeLookup[this.state.type]+" to Database"}),Object.keys(this.state.entries).map((function(t){var a=s.a.createElement(Ut.a,{id:t,value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}});return"select"===e.state.entries[t].type?a=s.a.createElement(aa.a,{selectedItem:e.state.entries[t].value,onChange:function(a){return e.handleDropdownChange(a,t)},items:e.state.entries[t].options}):"list"===e.state.entries[t].type?a=s.a.createElement(na,{options:e.state.entries[t].options,label:e.state.entries[t].label,values:e.state.entries[t].values}):"date"===e.state.entries[t].type&&(a=s.a.createElement(sa,{options:e.state.entries[t].options,label:e.state.entries[t].label,setValue:function(a){return e.state.entries[t].value=a}})),s.a.createElement(ta.a,{key:t,className:"ref-data-create-entry-element"},e.state.entries[t].help?s.a.createElement(Pt.a,{direction:"right",triggerText:e.state.entries[t].label},e.state.entries[t].help):s.a.createElement(Bt.a,null,e.state.entries[t].label),a)})),s.a.createElement(j.a,{className:"btn-default btn-ref-data btn-add",kind:"primary",tabIndex:0,size:"small",onClick:function(t){return e.props.save(e.state.entries)}},"Create"))}}]),t}(n.Component),na=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).addInnerKey=a.addInnerKey.bind(Object(y.a)(a));var r={};return Object.keys(a.props.values).forEach((function(e){r[e]=a.props.values[e]})),a.state={entries:r,nextKeyValue:2},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e,t,a){var r=this.state.entries;r[t][a]=e.target.value||e.target.text,this.setState({entries:r}),this.props.values[t][a]=e.target.value}},{key:"handleDropdownChange",value:function(e,t,a){var r=this.state.entries;r[t][a]=e.selectedItem,this.setState({entries:r}),this.props.values[t][a]=e.selectedItem}},{key:"addInnerKey",value:function(e){var t="Inner Key "+this.state.nextKeyValue,a=this.state.entries;a[t]={label:t,type:"ALN"},this.setState({entries:a,nextKeyValue:this.state.nextKeyValue+1}),this.props.values[t]={label:t,type:"ALN"}}},{key:"removeInnerKey",value:function(e){var t=this.state.entries;delete t[e],this.setState({entries:t}),delete this.props.values[e]}},{key:"toggleDropDown",value:function(e){var t=this.state.entries;t[e].elemTypeDropdownState=!t[e].elemTypeDropdownState,this.setState({entries:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},Object.keys(this.state.entries).map((function(t){return s.a.createElement("div",{className:"inner-keys-inputs",key:t},s.a.createElement(aa.a,{items:e.props.options,selectedItem:e.state.entries[t].type,onChange:function(a){return e.handleDropdownChange(a,t,"type")}}),s.a.createElement(Ut.a,{key:t,value:e.state.entries[t].label,onChange:function(a){return e.handleChange(a,t,"label")}}),s.a.createElement(j.a,{kind:"danger",size:"small",hasIconOnly:!0,renderIcon:pt.k,iconDescription:"Delete",tooltipPosition:"bottom",className:"btn-default btn-delete-subitem",onClick:function(a){return e.removeInnerKey(t)}}))})),s.a.createElement(j.a,{kind:"tertiary",size:"small",className:"btn-default btn-ref-data btn-bulk",onClick:function(t){return e.addInnerKey(t)}},"Add Inner Key"))}}]),t}(n.Component),sa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={label:"",type:"days"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t="";e.target.value&&(t=e.target.value+" "+this.state.type),this.setState({label:e.target.value}),this.props.setValue(t)}},{key:"handleDropdownChange",value:function(e){var t=this.state.label+" "+e.selectedItem;this.setState({type:e.selectedItem}),this.props.setValue(t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},s.a.createElement("div",{className:"inner-keys-inputs"},s.a.createElement(Ut.a,{value:this.state.label,onChange:function(t){return e.handleChange(t)}}),s.a.createElement(aa.a,{selectedItem:this.state.type,onChange:function(t){return e.handleDropdownChange(t)},items:this.props.options})))}}]),t}(n.Component),la=ra,ia=["background: green","color: white","display: block","text-align: center"].join(";"),oa=["background: red","color: white","display: block","text-align: center"].join(";");console.success=function(e){return console.log("%c".concat(e),ia)},console.fail=function(e){return console.log("%c".concat(e),oa)};var ua=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).refDataMapping={maps:Yt,sets:Gt,map_of_sets:Xt,tables:$t};return a.state={refData:{sets:{key:"sets",label:"Reference Sets",nodes:{},isOpen:!1},maps:{key:"maps",label:"Reference Maps",nodes:{},isOpen:!1},map_of_sets:{key:"map_of_sets",label:"Reference Map of Sets",nodes:{},isOpen:!1},tables:{key:"tables",label:"Reference Tables",nodes:{},isOpen:!1}},errorMessages:[],displayError:!1},a.menuItemClicked=a.menuItemClicked.bind(Object(y.a)(a)),a.createEntry=a.createEntry.bind(Object(y.a)(a)),a.entryCreated=a.entryCreated.bind(Object(y.a)(a)),a.deleteEntry=a.deleteEntry.bind(Object(y.a)(a)),a.toggleLoading=a.toggleLoading.bind(Object(y.a)(a)),a.showError=a.showError.bind(Object(y.a)(a)),a.getRefData=a.getRefData.bind(Object(y.a)(a)),a.getRefData(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"menuItemClicked",value:function(e,t){e.stopPropagation(),this.setState({currentRefDataEntry:{selectedEntryAPI:t.key,selectedEntryName:t.label,selectedEntrySize:t.size,selectedEntryType:t.datatype},atHome:!1,createNew:!1})}},{key:"createEntry",value:function(e,t){e.stopPropagation(),console.log(t),this.setState({createNew:!0,createNewReferenceEntryType:t})}},{key:"entryCreated",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.toggleLoading(!0,!0),a={},t.inner_labels&&(a.outer_key_label=t.key_label.value,r=[],Object.keys(t.inner_labels.values).forEach((function(e){r.push({key_name:t.inner_labels.values[e].label,element_type:t.inner_labels.values[e].type})})),a.key_name_types=JSON.stringify(r)),e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=11;break}if("key_label"!==(n=e.t1.value)&&"inner_labels"!==n){e.next=8;break}return e.abrupt("continue",4);case 8:a[n]=t[n].value,e.next=4;break;case 11:return e.next=13,Q(this.state.createNewReferenceEntryType,a);case 13:(s=e.sent).error?this.showError(s.message):(l=this.state.createNewReferenceEntryType+"/"+a.name,this.setState({currentRefDataEntry:{selectedEntryAPI:l,selectedEntryName:a.name,selectedEntrySize:0,selectedEntryType:this.state.createNewReferenceEntryType},createNew:!1,atHome:!1}),this.getRefData()),this.toggleLoading(!0,!1);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEntry",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this entry")){e.next=8;break}return this.toggleLoading(!0,!0),t=function(e){e.error?a.showError(e.message):(a.setState({atHome:!0,currentRefDataEntry:void 0}),a.getRefData()),a.toggleLoading(!0,!1)},e.next=6,le(this.state.currentRefDataEntry.selectedEntryType,this.state.currentRefDataEntry.selectedEntryName,t);case 6:e.next=9;break;case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e,t),this.setState((function(a){return{loadingModalOpen:e?t:!a.loadingModalOpen}}))}},{key:"showError",value:function(e){var t=this.state.errorMessages;document.getElementsByClassName("ref-data")[0].scrollTop=0,e||(e="An unspecified error occured"),e=Array.isArray(e)?e:[e],t.push.apply(t,Object(o.a)(e)),this.setState({displayError:!0,errorMessages:t})}},{key:"getRefData",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,a,r,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.refData,a=c.a.mark((function e(a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a);case 2:if(!(r=e.sent).error){e.next=6;break}return n.props.showError("Unable to load "+t[a].label),e.abrupt("return","continue");case 6:t[a].nodes={},t[a].size=r.length,t[a].datatype=a.replace(/_/g," "),r.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})),r.forEach((function(e){var r={label:e.name,size:e.number_of_elements,datatype:a,key:a+"/"+e.name};t[a].nodes[e.name]=r}));case 11:case"end":return e.stop()}}),e)})),e.t0=c.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,e.delegateYield(a(r),"t2",6);case 6:if("continue"!==e.t2){e.next=9;break}return e.abrupt("continue",3);case 9:e.next=3;break;case 11:this.setState({refData:t});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="",a="",r="",n=0;if(this.state.currentRefDataEntry&&(t=this.state.currentRefDataEntry.selectedEntryType,a=this.state.currentRefDataEntry.selectedEntryAPI,r=this.state.currentRefDataEntry.selectedEntryName,n=this.state.currentRefDataEntry.selectedEntrySize),!t&&window.location&&window.location.href.includes("/data/")){a=decodeURI(window.location.href.split("/data")[1]),console.log(a);var l=a.split("/");t=l[1],r=l[2]}var i=this.refDataMapping[t];return s.a.createElement(b.a,null,s.a.createElement(w.a,{secondaryInitialSize:84,percentage:!0},s.a.createElement(A,{menuItemAction:this.menuItemClicked,showError:this.showError,createEntry:this.createEntry,refData:this.state.refData}),s.a.createElement("div",{id:"content",className:"ref-data"},this.state.displayError&&s.a.createElement(k.a,{kind:"error",className:"error-alert",key:this.state.errorMessages,onCloseButtonClick:function(t){e.setState({displayError:!1,errorMessages:[]})},title:"Error"},this.state.errorMessages.map((function(e){return s.a.createElement("span",{key:e,className:"error-alert-message"},e,s.a.createElement("br",null))}))),s.a.createElement(g.a,{className:"loading-modal",open:this.state.loadingModalOpen,onRequestClose:function(t){return e.setState((function(e){return{loadingModalOpen:!e.loadingModalOpen}}))},passiveModal:!0,size:"xs"},s.a.createElement(E.a,{className:"loading-modal-loader"})),this.state.createNew?s.a.createElement(la,{type:this.state.createNewReferenceEntryType,save:this.entryCreated}):i?s.a.createElement(i,{key:a,api:a,name:r,type:t,size:n,deleteEntry:this.deleteEntry,dataUpdated:this.getRefData,toggleLoading:this.toggleLoading,showError:this.showError}):s.a.createElement(s.a.Fragment,null))))}}]),t}(n.Component);a(311);i.a.render(s.a.createElement(ua,null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.a2bf3d34.chunk.js.map