(this["webpackJsonpref-data-management"]=this["webpackJsonpref-data-management"]||[]).push([[0],{123:function(e,t,a){e.exports=a(199)},132:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"sets",(function(){return ye})),a.d(n,"maps",(function(){return ve})),a.d(n,"map_of_sets",(function(){return ke})),a.d(n,"tables",(function(){return ge})),a.d(n,"setAddItem",(function(){return we})),a.d(n,"setBulkAddItems",(function(){return xe})),a.d(n,"setImportItems",(function(){return Ee})),a.d(n,"mapAddItem",(function(){return Se})),a.d(n,"mapBulkAddItems",(function(){return Ie})),a.d(n,"mapImportItems",(function(){return _e})),a.d(n,"map_of_setsAddItem",(function(){return Oe})),a.d(n,"map_of_setsAddInnerItem",(function(){return De})),a.d(n,"map_of_setsImportItems",(function(){return Ce})),a.d(n,"map_of_setsBulkAddItems",(function(){return Ae})),a.d(n,"tableAddItem",(function(){return Te})),a.d(n,"tableAddInnerItem",(function(){return je})),a.d(n,"tableImportItems",(function(){return Me})),a.d(n,"tableBulkAddItems",(function(){return Le}));var r,l=a(0),s=a.n(l),o=a(55),u=a.n(o),i=a(16),c=a(19),d=a(4),p=a.n(d),m=a(6),f=a(7),h=a(14),b=a(9),y=a(8),v=a(10),k=a(222),g=a(223),w=a(112),x=a.n(w),E=(a(131),a(132),a(15)),S=a(208),I=a(200),_=a(209),O=a(201),D=a(210),C=a(211),A=a(212),T=a(81),j=a(120);T.a.use(j.a).init({resources:{en:{translations:{"data.sidebar.search":"Search","data.sidebar.create":"Create New","data.sidebar.type":"Reference $t({{type}})","data.table.elements.delete.set":"Delete Set","data.table.elements.delete.map":"Delete Map","data.table.elements.delete.map_of_sets":"Delete Map of Sets","data.table.elements.delete.table":"Delete Table","data.table.elements.add":"Add Entry","data.table.elements.bulk":"Bulk Add","data.table.elements.import":"Import CSV","data.table.elements.export":"Export CSV","data.table.elements.delete":"Delete","data.meta.elements.purge":"Clear Data","data.meta.elements.count":"Number of Elements","data.meta.elements.creation":"Creation Time","data.meta.elements.type.value":"Value Type","data.meta.elements.types.value":"Value Types","data.meta.elements.type.key":"Key Type","data.meta.elements.types.key":"Key Types","data.meta.elements.ttl":"Time To Live","data.meta.elements.ttl.forever":"Forever","data.meta.elements.timeout":"Timeout Type","data.dependents.title":"Dependents","data.dependents.none":"This ReferenceData appears to not have any data depending on it","carbon.table.pagination.items.per.page":"Items per page","carbon.table.pagination.pages.total":"of {{total}} pages ","carbon.table.pagination.items.total":"{{min}}\u2013{{max}} of {{total}} items","carbon.table.batch.cancel":"Cancel","carbon.table.batch.items.selected":"{{totalSelected}} items selected","carbon.table.batch.item.selected":"{{totalSelected}} item selected","carbon.table.toolbar.search.label":"Filter table","carbon.table.toolbar.search.placeholder":"Filter table","data.new.title":"Add new Reference {{type}} to Database","data.new.create":"Create","data.new.add.key.inner":"Add Inner Key","data.new.elementtype":"Element Type","data.new.timeout":"Timeout Type","data.new.ttl":"Time to Live","data.new.name":"Reference $t({{name}}) Name","data.new.name.help":"Required: The name of the $t({{name}}) to be created. Must not exist already","data.new.key":"Key Label","data.new.key.type":"Key Type","data.new.key.outer":"Outer Key Label","data.new.value":"Value Label","data.table.elements.add.separator.help":"New lines are implicit separators","data.table.elements.add.source.help":"Optional: A comment to add to the new data entry","data.table.elements.add.title":"Add Entry","data.table.elements.add.entries":"Entries","data.table.elements.add.save":"Save","data.table.elements.add.close":"Close","data.table.elements.add.file":"File","data.table.elements.add.file.placeholder":"Drag and drop file here or click to upload","data.table.elements.add.source":"Comment",Set:"Set",Map:"Map","Map of Sets":"Map of Sets",Table:"Table"}},de:{translations:(r={"data.sidebar.search":"Suchen","data.sidebar.create":"Hinzuf\xfcgen","data.sidebar.type":"Referenz $t({{type}})","data.table.elements.delete.data":"Set l\xf6schen","data.table.elements.delete.map":"Map l\xf6schen","data.table.elements.delete.map_of_sets":"Map of Sets l\xf6schen","data.table.elements.delete.table":"Tabelle l\xf6schen","data.table.elements.add":"Eintrag hinzuf\xfcgen","data.table.elements.bulk":"Mehrere hinzuf\xfcgen","data.table.elements.import":"CSV importieren","data.table.elements.export":"CSV exportieren","data.table.elements.delete":"L\xf6schen","data.meta.elements.purge":"Daten l\xf6schen","data.meta.elements.count":"Anzahl Elemente","data.meta.elements.creation":"Erstelldatum","data.meta.elements.type.value":"Werttyp","data.meta.elements.types.value":"Werttypen","data.meta.elements.type.key":"Schl\xfcsseltyp","data.meta.elements.types.key":"Schl\xfcsseltypen","data.meta.elements.ttl":"Ablaufzeitraum","data.meta.elements.ttl.forever":"Nie","data.meta.elements.timeout":"Ablauftyp","data.dependents.title":"Abh\xe4ngigkeiten","data.dependents.none":"F\xfcr diesen Eintrag scheint es keine Abh\xe4ngigkeiten zu geben","carbon.table.pagination.items.per.page":"Elemente pro Seite","carbon.table.pagination.pages.total":"von {{total}} Seiten","carbon.table.pagination.items.total":"{{min}}\u2013{{max}} von {{total}} Elementen","carbon.table.batch.cancel":"Abbrechen","carbon.table.batch.item.selected":"{{totalSelected}} Element ausgew\xe4hlt","carbon.table.batch.items.selected":"{{totalSelected}} Elemente ausgew\xe4hlt","carbon.table.toolbar.search.label":"Tabelle durchsuchen","carbon.table.toolbar.search.placeholder":"Tabelle durchsuchen","data.new.title":"Erstelle Referenz $t({{type}}) in Datenbank","data.new.create":"Hinzuf\xfcgen","data.new.add.key.inner":"Inneren Schl\xfcssel hinzuf\xfcgen","data.new.elementtype":"Element Typ","data.new.timeout":"Ablauftyp","data.new.ttl":"Ablaufzeitraum","data.new.name":"Name des/r Referenz $t({{name}})","data.new.name.help":"Verpflichtend: Der Name f\xfcr den zu erstellenden Referenz $t({{name}}) Eintrag. Darf noch nicht existieren","data.new.key":"Bezeichnung f\xfcr Schl\xfcssel","data.new.key.type":"Datentyp des Schl\xfcssels","data.new.key.outer":"Bezeichnung f\xfcr \xe4u\xdferen Schl\xfcssel","data.new.value":"Bezeichnung f\xfcr Wert","data.table.elements.add.title":"Eintrag hinzuf\xfcgen","data.table.elements.add.save":"Hinzuf\xfcgen","data.table.elements.add.close":"Schlie\xdfen","data.table.elements.add.separator.help":"Zeilenumbr\xfcche sind implizite Separatoren","data.table.elements.add.source":"Kommentar","data.table.elements.add.source.help":"Optional: Kommentar f\xfcr den neuen Eintrag"},Object(E.a)(r,"data.table.elements.add.title","Eintrag hinzuf\xfcgen"),Object(E.a)(r,"data.table.elements.add.entries","Eintr\xe4ge"),Object(E.a)(r,"data.table.elements.add.file","Datei"),Object(E.a)(r,"data.table.elements.add.file.placeholder","Datei herziehen oder klicken um eine neue Datei hochzuladen"),Object(E.a)(r,"Set","Set"),Object(E.a)(r,"Map","Zuordnung"),Object(E.a)(r,"Map of Sets","Zuordnung von Gruppen"),Object(E.a)(r,"Table","Tabelle"),r)}},fallbackLng:"en",debug:!1,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1}});var M=T.a,L=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).toggleMenu=function(e){return a.setState((function(t){return Object(E.a)({entries:a.props.refData},e,!t[e])}))},a.searchInputChanged=function(e){return a.setState({searchText:e.target.value,sets:!0,maps:!0,map_of_sets:!0,tables:!0})},a.matchesCurrentSearch=function(e){try{return e.match(new RegExp(a.state.searchText,"i"))}catch(t){return e.toLowerCase().includes(a.state.searchText.toLowerCase())}},a.state={searchText:""},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"menu"},s.a.createElement(S.a,{type:"text",labelText:M.t("data.sidebar.search"),placeHolderText:M.t("data.sidebar.search"),light:!0,onChange:this.searchInputChanged,value:this.state.searchText}),s.a.createElement(I.a,null,Object.keys(this.props.refData).map((function(t){return s.a.createElement(_.a,{key:t,open:e.state[t],title:e.props.refData[t].label,className:"menu-title",onClick:function(){return e.toggleMenu(t)}},s.a.createElement(O.a,{kind:"primary",size:"small",className:"btn-create-new",onClick:function(a){return e.props.createEntry(a,t)},key:"btn-"+t},M.t("data.sidebar.create")),s.a.createElement(D.a,{className:"menu-list"},void 0===e.props.refData[t].size?s.a.createElement(C.a,{paragraph:!0,lineCount:3,heading:!0}):Object.keys(e.props.refData[t].nodes).map((function(a){if(e.matchesCurrentSearch(a)){var n=e.props.refData[t].nodes[a];return s.a.createElement(O.a,{kind:"ghost",size:"small",key:n.label,className:"menu-entry",onClick:function(t){return e.props.menuItemAction(t,n)}},n.label,s.a.createElement(A.a,{className:"menu-entry-badge"},n.size||"0"))}}))))}))))}}]),t}(l.Component),R=a(113),V=a.n(R),N=a(37),K=a(114),z=a.n(K),F={apiRoot:"/api",refDataApi:"/reference_data/",rulesApi:"analytics/",ruleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=edit&appName=qradar&pageId=rulewizard&ruleId=",newRuleWizardBase:"/console/core/jsp/WizardFrame.jsp?action=new&appName=qradar&pageId=rulewizard&type=",aqlSearch:"/console/qradar/jsp/ArielSearchWrapper.jsp?"+encodeURI("url=do/ariel/arielSearch?"),aqlSearchDefaults:encodeURIComponent("appName=EventViewer&pageId=EventList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),aqlSearchDefaultsFlow:encodeURIComponent("appName=Surveillance&pageId=FlowList&dispatch=performSearch&value(searchMode)=AQL&value(timeRangeType)=aqlTime&"),popupSettings:"status=yes,scrollbars=yes,resizable=yes,",axiosHeaders:{"Content-Type":"text/plain",Version:"10.1"},colors:{cepForce:"#0530ad",cep:"#0062ff",lst:"#054719",bb:"#da1e28",rule:"#750e13",font:"white",fontDisabled:"lightgray",edge:"#a2b5ce",qradarBlue:"#4178be"},fontFace:'"IBM Helvetica Neue", "Helvetica Neue", Helvetica, Arial, Roboto, sans-serif'},P=function(e){return e?encodeURIComponent(encodeURIComponent(e)):void 0},B=!1,H="";try{var q=N.QRadar.getCurrentUser();q&&!q.error&&(B=!0),H=N.QRadar.getCookie(N.QRadar.QRADAR_CSRF)}catch(Jt){}function U(e,t,a,n,r){return W.apply(this,arguments)}function W(){return(W=Object(m.a)(p.a.mark((function e(t,a,n,r,l){var s,o,u,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=V.a.create(),(o=Object.assign({},F.axiosHeaders,l||{})).Version="8",s.defaults.timeout=6e5,u=Math.ceil(1e3*Math.random()),console.time("".concat(u,": ").concat(t," ").concat(a)),i={data:[]},B&&(o[N.QRadar.QRADAR_CSRF]=H),e.prev=8,e.next=11,s.request({method:t,url:F.apiRoot+a+(n?"?"+z.a.stringify(n):""),data:r||{},headers:o});case 11:i=e.sent,e.next=23;break;case 14:if(e.prev=14,e.t0=e.catch(8),console.log("Failed loading data from ".concat(a)),console.timeEnd("".concat(u,": ").concat(t," ").concat(a)),e.t0.response&&e.t0.response.data){e.next=22;break}return e.abrupt("return",{error:e.t0,message:"Failed performing the requested network operation"});case 22:return e.abrupt("return",{error:e.t0,message:e.t0.response.data.message});case 23:return console.timeEnd("".concat(u,": ").concat(t," ").concat(a)),e.abrupt("return",i.data);case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function G(e,t,a,n){return J.apply(this,arguments)}function J(){return(J=Object(m.a)(p.a.mark((function e(t,a,n,r){var l,s,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"GET","id, status, message",l=a,s=a.status,o=0,u=setInterval(Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o++,!("CANCELLED"===s||"CANCELING"===s||"EXCEPTION"===s||"CONFLICT"===s||o>50)){e.next=6;break}clearInterval(u),n({error:!0,message:l.message}),e.next=19;break;case 6:if("COMPLETED"!==s){e.next=15;break}if(clearInterval(u),!r){e.next=12;break}return e.next=11,U("GET",t+"/results",{});case 11:l=e.sent;case 12:n(l),e.next=19;break;case 15:return e.next=17,U("GET",t,{fields:"id, status, message"});case 17:l=e.sent,s=l.status;case 19:case"end":return e.stop()}}),e)}))),2e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return $.apply(this,arguments)}function $(){return($=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/reference_data/".concat(t),"GET",e.next=4,U("GET",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/reference_data/".concat(t),"POST",e.next=4,U("POST",n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a){return ee.apply(this,arguments)}function ee(){return(ee=Object(m.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/reference_data/".concat(t,"/").concat(P(a)),"GET",e.next=4,U("GET",r,void 0,void 0,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,a,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(m.a)(p.a.mark((function e(t,a,n,r){var l,s,o,u,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l="/reference_data/".concat(t,"/").concat(P(a),"/dependents"),s="GET",o="status, id, message",e.prev=2,a){e.next=5;break}throw new Error;case 5:return e.next=7,U(s,l,{fields:o});case 7:if((u=e.sent)&&u.id){e.next=10;break}throw new Error;case 10:if(i=u.status||"CANCELLED","maps"===t?t="map":"sets"===t&&(t="set"),c="/reference_data/".concat(t,"_dependent_tasks/").concat(u.id),!r){e.next=17;break}return e.abrupt("return",u);case 17:G(c,i,n,!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),n({error:e.t0,message:"Unable to load dependents"});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))).apply(this,arguments)}function ne(e,t,a){return re.apply(this,arguments)}function re(){return(re=Object(m.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/reference_data/".concat(t,"/").concat(P(a)),"POST",e.next=4,U("POST",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,a,n){return se.apply(this,arguments)}function se(){return(se=Object(m.a)(p.a.mark((function e(t,a,n,r){var l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="/reference_data/".concat(t,"/").concat(P(a),"/").concat(P(n)),"DELETE",e.next=4,U("DELETE",l,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(m.a)(p.a.mark((function e(t,a,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(t,a,n,!0,r);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(m.a)(p.a.mark((function e(t,a,n){var r,l,s,o,u,i,c,d=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>3&&void 0!==d[3]&&d[3],l=d.length>4&&void 0!==d[4]&&d[4],s="/reference_data/".concat(t,"/").concat(P(a)),o="DELETE",e.prev=4,a){e.next=7;break}throw new Error;case 7:return e.next=9,U(o,s,{purge_only:r});case 9:if((u=e.sent)&&u.id){e.next=12;break}throw new Error;case 12:if(i=u.status,"maps"===t?t="map":"sets"===t&&(t="set"),c="/reference_data/".concat(t,"_delete_tasks/").concat(u.id),n&&!l){e.next=19;break}return e.abrupt("return",u);case 19:G(c,i,n);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),n({error:e.t0,message:e.t0.message||"Unable to delete Reference Data"});case 25:case"end":return e.stop()}}),e,null,[[4,22]])})))).apply(this,arguments)}function ce(e,t,a,n,r){return de.apply(this,arguments)}function de(){return(de=Object(m.a)(p.a.mark((function e(t,a,n,r,l){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/reference_data/".concat(t,"/").concat(P(a),"/").concat(P(n),"/").concat(P(r)),"DELETE",e.next=4,U("DELETE",s,l);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,a){return me.apply(this,arguments)}function me(){return(me=Object(m.a)(p.a.mark((function e(t,a,n){var r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/reference_data/".concat(t,"/bulk_load/").concat(P(a)),"POST",(l={})["Content-Type"]="application/json",e.next=6,U("POST",r,{},n,l);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=["ALN","NUM","IP","PORT","ALNIC","DATE"],he=["FIRST_SEEN","LAST_SEEN"],be=["mons","days","hours","minutes","seconds"],ye={name:{value:"",type:"text",label:M.t("data.new.name",{name:"Set"}),help:M.t("data.new.name.help",{name:"Set"})},element_type:{value:"ALN",type:"select",label:M.t("data.new.elementtype"),options:fe,help:"Required: The data type of the values in the new Set"},timeout_type:{value:"FIRST_SEEN",type:"select",label:M.t("data.new.timeout"),options:he,help:"Optional: The value based on which new data expires from the Set"},time_to_live:{value:"",type:"date",options:be,label:M.t("data.new.ttl"),help:"Optional: If given, the entries of the set expire"}},ve={name:{value:"",type:"text",label:M.t("data.new.name",{name:"Map"}),help:M.t("data.new.name.help",{name:"Map"})},element_type:{value:"ALN",type:"select",label:M.t("data.new.elementtype"),options:fe,help:"Required: The data type of the values in the new Map"},timeout_type:{value:"FIRST_SEEN",type:"select",label:M.t("data.new.timeout"),options:he,help:"Optional: The value based on which new data expires from the Map"},time_to_live:{value:"",type:"date",options:be,label:M.t("data.new.ttl"),help:"Optional: If given, the entries of the Map expire"},key_label:{value:"",label:M.t("data.new.key"),type:"text",help:"Required: The label of the keys in the new Map"},value_label:{value:"",label:M.t("data.new.value"),type:"text",help:"Required: The label of the values in the new Map"}},ke={name:{value:"",type:"text",label:M.t("data.new.name",{name:"Map of Sets"}),help:M.t("data.new.name.help",{name:"Map of Sets"})},element_type:{value:"ALN",type:"select",label:M.t("data.new.elementtype"),options:fe,help:"Required: The data type of the values in the new Map of Sets"},timeout_type:{value:"FIRST_SEEN",type:"select",label:M.t("data.new.timeout"),options:he,help:"Optional: The value based on which new data expires from the Map of Sets"},time_to_live:{value:"",type:"date",options:be,label:M.t("data.new.ttl"),help:"Optional: If given, the entries of the Map of Sets expire"},key_label:{value:"",label:M.t("data.new.key"),type:"text",help:"Required: The label of the keys in the new Map of Sets"},value_label:{value:"",label:M.t("data.new.value"),type:"text",help:"Required: The label of the values in the new Map of Sets"}},ge={name:{value:"",type:"text",label:M.t("data.new.name",{name:"Table"}),help:M.t("data.new.name.help",{name:"Table"})},timeout_type:{value:"FIRST_SEEN",type:"select",label:M.t("data.new.timeout"),options:he,help:"Optional: The value based on which new data expires from the Table"},time_to_live:{value:"",type:"date",options:be,label:M.t("data.new.ttl"),help:"Optional: If given, the entries of the Table expire"},key_label:{value:M.t("data.new.key.outer"),label:M.t("data.new.key"),type:"text",help:"Required: The label of the keys in the new Table"},element_type:{value:"ALN",type:"select",label:M.t("data.new.key.type"),options:fe,help:"Required: The data type of the Outer Keys in the new Table"},inner_labels:{label:"Inner Keys",options:fe,type:"list",values:{"Inner Key 1":{label:"Inner Key 1",type:"ALN"}},help:"Required: The data type of the Inner Keys in the new Table"}},we={value:{label:"Value",value:"",type:"text"},source:{value:"",label:M.t("data.table.elements.add.source"),type:"text",help:M.t("data.table.elements.add.source.help")}},xe={bulkAddData:{label:M.t("data.table.elements.add.entries"),value:"",type:"textarea"},bulkAddSeparator:{label:"Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Ee={file:{label:M.t("data.table.elements.add.file"),value:"",type:"file"},bulkAddSeparator:{label:"Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Se={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:M.t("data.table.elements.add.source"),type:"text",help:M.t("data.table.elements.add.source.help")}},Ie={bulkAddData:{label:M.t("data.table.elements.add.entries"),value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},_e={file:{label:M.t("data.table.elements.add.file"),value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:"=",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Oe={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},De={value:{label:"Value",value:"",type:"text"},source:{value:"",label:M.t("data.table.elements.add.source"),type:"text",help:M.t("data.table.elements.add.source.help")}},Ce={file:{label:M.t("data.table.elements.add.file"),value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Ae={bulkAddData:{label:M.t("data.table.elements.add.entries"),value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Values Separator",value:"=",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddValuesSeparator:{label:"Value-Value Separator",value:",",help:"Example Format: Key=Value1,Value2;Key2=Value3, ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Te={keyAddDataKey:{label:"Input Key",value:"",type:"text"},keyAddDataValues:{label:"Input Values",value:"",type:"textarea"},keyAddSeparator:{label:"Separator",value:",",help:M.t("data.table.elements.add.separator.help"),type:"text"}},je={key:{label:"Key",value:"",type:"text"},value:{label:"Value",value:"",type:"text"},source:{value:"",label:M.t("data.table.elements.add.source"),type:"text",help:M.t("data.table.elements.add.source.help")}},Me={file:{label:M.t("data.table.elements.add.file"),value:"",type:"file"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Le={bulkAddData:{label:M.t("data.table.elements.add.entries"),value:"",type:"textarea"},bulkAddKeyValueSeparator:{label:"Key-Value Separator",value:",",help:"Example Format: Parent Key, Inner Key, Value; ...",type:"text"},bulkAddEntriesSeparator:{label:"Entries Separator",value:";",help:M.t("data.table.elements.add.separator.help"),type:"text"}},Re=[{key:"value",header:"Value"},{key:"first_seen",header:"First Seen"},{key:"last_seen",header:"Last Seen"},{key:"source",header:"Source"}],Ve=[{key:"key",header:"Key"},{key:"value",header:"Value"},{key:"first_seen",header:"First Seen"},{key:"last_seen",header:"Last Seen"},{key:"source",header:"Source"}],Ne=[{key:"key",header:"Key"}],Ke=[{key:"value",header:"Value"},{key:"first_seen",header:"First Seen"},{key:"last_seen",header:"Last Seen"},{key:"source",header:"Source"}],ze=[{key:"key",header:"Key"}],Fe=[{key:"key",header:"Inner Key"},{key:"value",header:"Value"},{key:"first_seen",header:"First Seen"},{key:"last_seen",header:"Last Seen"},{key:"source",header:"Source"}],Pe=a(115),Be=a.n(Pe),He=a(56),qe=a.n(He);function Ue(e){var t="",a=e.split(/(\S+\s\S+)/).filter((function(e){return e.trim()})),n=!0,r=!1,l=void 0;try{for(var s,o=a[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;0!=u.split(/\s/)[0]&&(t+=" "+u)}}catch(i){r=!0,l=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}var We=a(213),Ge=a(214),Je=a(43),Qe=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=[s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.count"),": ",s.a.createElement(A.a,{type:"gray"},this.props.data.number_of_elements||0)),s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.creation"),": ",this.props.data.creation_time?(e=this.props.data.creation_time,qe()(e,"dd/mmm/yyyy, hh:MM:ss TT")):""),s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.timeout"),": ",this.props.data.timeout_type),s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.ttl"),": ",this.props.data.time_to_live?Ue(this.props.data.time_to_live):M.t("data.meta.elements.ttl.forever")),s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.type.value"),": ",this.props.data.element_type)],a=this.props.data.key_name_types&&"";if(void 0!==a){for(var n in this.props.data.key_name_types)a+=this.props.data.key_name_types[n]+" ("+n+"), ";t.splice(4,0,s.a.createElement(s.a.Fragment,null,M.t("data.meta.elements.types.key"),": ",a))}return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{kind:"danger",size:"small",className:"delete top right",onClick:this.props.deleteEntry},M.t("data.table.elements.delete."+this.props.typeLabel)),s.a.createElement(O.a,{kind:"danger",size:"small",className:"delete top-second right",onClick:this.props.purgeData},M.t("data.meta.elements.purge")),this.props.data.name?s.a.createElement(We.e,{className:"meta-data"},s.a.createElement(We.c,null,s.a.createElement(We.d,{head:!0},s.a.createElement(We.b,{head:!0,className:"meta-data-title"},this.props.data.name,s.a.createElement(O.a,{className:"reload",onClick:this.props.reload,kind:"ghost",size:"small",tooltipPosition:"bottom",renderIcon:Je.c,iconDescription:"Refresh"})))),s.a.createElement(We.a,null,t.map((function(e,t){return s.a.createElement(We.d,{key:t},s.a.createElement(We.b,{className:"meta-data-entry"},e))})))):s.a.createElement(Ge.a,{className:"meta-data"}))}}]),t}(l.Component),$e=a(224),Ye=a(78),Ze=a(79),Xe=a(80),et=a(226),tt=$e.a.TableContainer,at=$e.a.Table,nt=$e.a.TableHead,rt=$e.a.TableRow,lt=$e.a.TableBody,st=$e.a.TableCell,ot=$e.a.TableHeader,ut=$e.a.TableToolbar,it=$e.a.TableSelectAll,ct=$e.a.TableSelectRow,dt=$e.a.TableBatchActions,pt=$e.a.TableBatchAction,mt=$e.a.TableToolbarContent,ft=$e.a.TableToolbarSearch,ht=function(e){return qe()(e,"dd/mmm/yyyy, hh:MM:ss TT")},bt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).formatters={first_seen:ht,last_seen:ht},a.onInputChange=function(e){a.props.tableChanged("search",{searchText:e.target.value}),a.setState({firstRowIndex:0,currentPage:1,updatePagination:Math.random()})},a.sortTable=function(e){var t="ASC";e===a.state.sortHeader&&(t="ASC"===a.state.sortDirection?"DESC":"ASC");var n={ASC:[-1,1],DESC:[1,-1]};a.props.data.sort((function(a,r){return a[e]<r[e]?n[t][0]:n[t][1]})),a.setState({sortDirection:t,sortHeader:e})},a.state={currentPageSize:10,firstRowIndex:0,currentPage:1,updatePagination:Math.random(),sortDirection:"ASC"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,a=this.props.data.slice(this.state.firstRowIndex,this.state.firstRowIndex+this.state.currentPageSize);return s.a.createElement($e.a,{useZebraStyles:!0,isSortable:!0,rows:a,headers:this.props.headers,render:function(a){var n=a.rows,r=a.getRowProps,l=a.headers,o=a.getHeaderProps,u=a.selectedRows,i=a.getSelectionProps,d=a.getTableProps,p=a.getBatchActionProps;return s.a.createElement(tt,null,s.a.createElement(ut,null,s.a.createElement(dt,Object.assign({},p(),{translateWithId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.t(e,{totalSelected:t.totalSelected})}}),s.a.createElement(pt,{renderIcon:Je.b,onClick:function(t){return e.props.deleteItem(u)}},M.t("data.table.elements.delete"))),s.a.createElement(mt,null,!e.props.innerTable&&s.a.createElement(ft,{onChange:e.onInputChange,translateWithId:function(e){return M.t(e)}}),s.a.createElement(O.a,{onClick:e.props.addItem,size:"small",kind:"primary",className:"btn-table"},M.t("data.table.elements.add")),!e.props.innerTable&&s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{onClick:e.props.bulkAddItem,size:"small",kind:"primary",className:"btn-table"},M.t("data.table.elements.bulk")),s.a.createElement(O.a,{onClick:e.props.importItems,size:"small",kind:"primary",className:"btn-table"},M.t("data.table.elements.import")),s.a.createElement(O.a,{onClick:e.props.exportItems,size:"small",kind:"primary",className:"btn-table"},M.t("data.table.elements.export"))))),s.a.createElement(at,d(),s.a.createElement(nt,null,s.a.createElement(rt,null,e.props.expandable&&s.a.createElement(Ye.a,null),s.a.createElement(it,i()),l.map((function(t){return s.a.createElement(ot,Object.assign({},o({header:t}),{sortDirection:e.state.sortDirection,isSortHeader:e.state.sortHeader===t.key,onClick:function(){return e.sortTable(t.key)}}),t.header)})))),s.a.createElement(lt,null,e.props.expandable&&n.map((function(a){return s.a.createElement(s.a.Fragment,{key:a.id},s.a.createElement(Ze.a,r({row:a}),s.a.createElement(ct,i({row:a})),a.cells.map((function(e){return s.a.createElement(st,{key:e.id},e.value)}))),a.isExpanded&&s.a.createElement(Xe.a,{colSpan:l.length+2},function(a){return s.a.createElement("div",{className:"inner-table"},s.a.createElement(t,{innerTable:!0,data:a.values,headers:e.props.extendableHeaders,addItem:function(t){return e.props.addInnerItem(a)},deleteItem:function(t){return e.props.deleteInnerItem(a.key,t)},searchText:e.props.innerSearchText}))}(e.props.data.find((function(e){return e.key===a.id})))))})),!e.props.expandable&&n.map((function(t){return s.a.createElement(rt,Object.assign({key:t.id},r({row:t})),s.a.createElement(ct,i({row:t})),t.cells.map((function(t){var a=t.id.split(":"),n=Object(c.a)(a,2),r=(n[0],n[1]),l=t.value;return r in e.formatters&&(l=e.formatters[r](l)),s.a.createElement(st,{key:t.id},l)})))})))),s.a.createElement(et.a,{key:e.state.currentPage*e.props.data.length*e.state.updatePagination,page:e.state.currentPage,pageSize:e.state.currentPageSize,pageSizes:[10,30,50,100],totalItems:e.props.data.length,itemsPerPageText:M.t("carbon.table.pagination.items.per.page"),pageRangeText:function(e,t){return M.t("carbon.table.pagination.pages.total",{total:t})},itemRangeText:function(e,t,a){return M.t("carbon.table.pagination.items.total",{min:e,max:t,total:a})},onChange:function(t){var a=t.page,n=t.pageSize;return e.setState({firstRowIndex:n*(a-1),currentPageSize:n})}}))}})}}]),t}(l.Component),yt=a(215),vt=a(216),kt=$e.a.Table,gt=$e.a.TableHead,wt=$e.a.TableRow,xt=$e.a.TableBody,Et=$e.a.TableCell,St=$e.a.TableHeader;var It,_t=function(e){var t;return t=e.dependents&&e.dependents.length>0?e.dependents.map((function(e,t){return{id:t,dependent:"("+e.dependent_type+") "+e.dependent_name}})):[{id:"0",dependent:M.t("data.dependents.none")}],e.loaded?s.a.createElement($e.a,{headers:[{header:M.t("data.dependents.title"),key:"dependent"}],rows:t,useZebraStyles:!0,render:function(t){var a=t.rows,n=t.headers,r=t.getTableProps,l=t.getHeaderProps,o=t.getRowProps;return s.a.createElement(kt,r(),s.a.createElement(gt,null,s.a.createElement(wt,null,n.map((function(e){return s.a.createElement(St,l({header:e}),e.header)})))),s.a.createElement(xt,null,a.map((function(t){return s.a.createElement(wt,Object.assign({key:t.id},o({row:t})),t.cells.map((function(a){return s.a.createElement(Et,{key:a.id},e.dependents&&e.dependents.length&&["CRE_RULE","BUILDING_BLOCK","ADE_RULE"].includes(e.dependents[t.id].dependent_type)?s.a.createElement(yt.a,{href:"#",onClick:function(a){a.preventDefault(),e.editRule(e.dependents[t.id].dependent_id)}},a.value):s.a.createElement(yt.a,null,a.value))})))}))))}}):s.a.createElement(vt.a,{headers:[M.t("data.dependents.title")],columnCount:1,rowCount:1})},Ot=a(229),Dt=a(217),Ct=a(227),At=a(218),Tt=a(228),jt=a(219),Mt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).handleChange=function(e,t){var n=a.state.entries,r=a.state.filename;"file"===e.target.type?(n[t].value=e.target.files.item(0),r=e.target.files.item(0).name):n[t].value=e.target.value,a.setState({entries:n,filename:r})},a.state={entries:a.props.entries,filename:"",show:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.props.modal!==this.state.show&&this.setState({entries:JSON.parse(JSON.stringify(this.props.entries)),show:this.props.modal,filename:""})}},{key:"label",value:function(e){return this.state.entries[e].help?s.a.createElement(Ot.a,{direction:"right",triggerText:this.state.entries[e].label},this.state.entries[e].help):s.a.createElement(Dt.a,null,this.state.entries[e].label)}},{key:"render",value:function(){var e=this,t=M.t("data.table.elements.add.file.placeholder");return s.a.createElement(Ct.a,{size:"sm",open:this.props.modal,onRequestSubmit:function(){e.props.save(e.state.entries),e.props.closeModal()},onRequestClose:this.props.closeModal,modalHeading:M.t("data.table.elements.add.title"),primaryButtonText:M.t("data.table.elements.add.save"),secondaryButtonText:M.t("data.table.elements.add.close")},s.a.createElement(We.e,{className:"input-modal"},s.a.createElement(We.a,null,Object.keys(this.state.entries).map((function(a){return s.a.createElement(We.d,{className:"input-modal-entry"},{file:s.a.createElement(At.a,{id:a,labelText:e.state.filename||t,onChange:function(t){return e.handleChange(t,a)}}),text:s.a.createElement(Tt.a,{id:a,labelText:e.label(a),value:e.state.entries[a].value,onChange:function(t){return e.handleChange(t,a)}}),textarea:s.a.createElement(jt.a,{id:a,labelText:e.label(a),value:e.state.entries[a].value,onChange:function(t){return e.handleChange(t,a)}})}[e.state.entries[a].type])})))))}}]),t}(l.Component),Lt=function(e){function t(e,a){var r;return Object(f.a)(this,t),(r=Object(b.a)(this,Object(y.a)(t).call(this,e))).defaultEntryComment=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!It){e.next=2;break}return e.abrupt("return",It);case 2:return e.prev=2,e.next=5,N.QRadar.getCurrentUser();case 5:(t=e.sent)&&!t.error&&(It=t.username),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",It);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),r.updateMetaData=function(e){var t=r.state.metaData;t.number_of_elements=e.number_of_elements,r.setState({metaData:t}),r.props.dataUpdated()},r.loadData=function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,l,s,o,u,c,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.loadDependents(),l=0,s=0,o=n=5e3;case 5:return u={Range:"items=".concat(s,"-").concat(o)},e.next=9,X(r.props.type,r.props.name,u);case 9:if(!(a=e.sent).error){e.next=14;break}return r.props.showError("Unable to load all elements"),r.setState({loaded:!0}),e.abrupt("return");case 14:if(!r.props.size&&a.number_of_elements&&(l=a.number_of_elements),c=t?[]:r.state.allEntries,t=!1,!a.data){e.next=36;break}return m=r.parseResponseData(a),c?(d=c).push.apply(d,Object(i.a)(m)):c=m,e.next=22,r.setState({allEntries:c});case 22:if(delete a.data,r.tableChanged(),!(l&&l>o)){e.next=32;break}a.number_of_elements=o+1,r.setState({metaData:a}),s=o+1,o+=n,console.log("Loading next batch from ".concat(s," to ").concat(o)),e.next=34;break;case 32:return console.log("Done loading all elements"),e.abrupt("break",40);case 34:e.next=38;break;case 36:return console.log("Last batch did not return any new elements. Terminating"),e.abrupt("break",40);case 38:e.next=5;break;case 40:r.setState({metaData:a,loaded:!0});case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadDependents=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){if(e.error)return r.props.showError("Unable to load dependents"),void r.setState({dependentsLoaded:!0});r.setState({dependents:e,dependentsLoaded:!0})},te(r.props.type,r.props.name,t);case 2:case"end":return e.stop()}}),e)}))),r.purgeData=function(){r.props.displayLoadingModal(!0);!function(e,t,a,n){oe.apply(this,arguments)}(r.props.type,r.props.name,(function(e){r.tableChanged("new",[]),r.updateMetaData(e),r.props.displayLoadingModal(!1)}))},r.reload=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.displayLoadingModal(!0),e.next=3,r.loadData(!0);case 3:r.props.displayLoadingModal(!1);case 4:case"end":return e.stop()}}),e)}))),r.clickAddItem=function(){r.setState({showInputModal:!0,modalSave:r.addItem,modalInputDefinition:n[r.type+"AddItem"]})},r.clickAddInnerItem=function(e){r.setState({showInputModal:!0,modalSave:function(t){return r.addInnerItem(e,t)},modalInputDefinition:n[r.type+"AddInnerItem"]})},r.clickBulkAddItem=function(){r.setState({showInputModal:!0,modalSave:r.bulkAddItems,modalInputDefinition:n[r.type+"BulkAddItems"]})},r.clickImportItems=function(){r.setState({showInputModal:!0,modalSave:r.importItems,modalInputDefinition:n[r.type+"ImportItems"]})},r.clickDeleteItem=function(e){r.deleteItem(e)},r.clickDeleteInnerItem=function(e,t){r.deleteInnerItem(e,t)},r.tableChanged=function(e,t){var a=r.state.allEntries,n=r.state.searchText;"search"===e&&t&&(n=t.searchText),"new"===e&&t&&(a=t);var l=[],s=!1;try{n=new RegExp(n,"gi"),s=!0}catch(Jt){}var o=0,u=!0,i=!1,c=void 0;try{for(var d,p=a[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var m=d.value;r.testValue(m,n,s)&&(m.index=o++,l.push(m))}}catch(f){i=!0,c=f}finally{try{u||null==p.return||p.return()}finally{if(i)throw c}}r.setState({tableData:l,searchText:n,allEntries:a})},r.getIFrameDoc=function(e){return e.contentDocument||e.contentWindow.document},r.showEditRuleModal=function(e){if(r.state.editRuleModalOpen)r.closeRuleModal();else{r.setState((function(e){return{editRuleModalOpen:!0}}));var t=setInterval((function(){if(void 0!==window.frames.rulesWindow){window.frames.rulesWindow.location.href=F.ruleWizardBase+e,clearInterval(t);var a=0,n=setInterval((function(){try{var e=r.getIFrameDoc(document.getElementById("ruleWizardFrame")),t=r.getIFrameDoc(e.getElementById("navigation")),l=t.getElementById("closeButton");t.getElementById("finishButton").addEventListener("click",r.saveRule),l.addEventListener("click",r.closeRuleModal),clearInterval(n)}catch(s){a++>=20&&(clearInterval(n),console.log("Something went wrong with registering the close handlers for the frame. Frame can be closed by clicking in the window background"),console.log(s))}}),1e3)}}),100)}},r.saveRule=function(){setTimeout((function(){var e=this.getIFrameDoc(document.getElementById("ruleWizardFrame"));this.getIFrameDoc(e.getElementById("content")).getElementsByTagName("body")[0].hasAttribute("onload")?this.closeRuleModal():document.getElementsByClassName("errorMessage").length>0||this.saveRule()}),400)},r.closeRuleModal=function(){return r.setState({editRuleModalOpen:!1})},r.type=a,r.headers={set:Re,map:Ve,map_of_sets:Ne,map_of_setsInner:Ke,table:ze,tableInner:Fe},r.state={metaData:{},allEntries:[],tableData:[],loaded:!1,searchText:"",modalInputDefinition:{}},r.loadData(),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"download",value:function(e,t,a,n){var r="";n&&(r+="parentKey,"),a&&(r+="key,"),r+="value,first_seen,last_seen,source\n";var l=!0,s=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(l=(u=i.next()).done);l=!0){var c=u.value;n&&(r+='"'+c.outer_key.replace(/"/g,'""')+'",'),a&&(r+='"'+c.key.replace(/"/g,'""')+'",'),r+='"'+c.value.replace(/"/g,'""')+'","'+c.first_seen+'","'+c.last_seen+'","'+c.source.replace(/"/g,'""')+'"\n'}}catch(p){s=!0,o=p}finally{try{l||null==i.return||i.return()}finally{if(s)throw o}}var d=new Blob([r],{type:"text/csv"});Be.a.saveAs(d,"".concat(e,".csv"))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Mt,{modal:this.state.showInputModal,save:this.state.modalSave,entries:JSON.parse(JSON.stringify(this.state.modalInputDefinition)),closeModal:function(t){return e.setState((function(e){return{showInputModal:!e.showInputModal}}))}}),s.a.createElement(Ct.a,{className:"rule-wizard-modal",size:"md",open:this.state.editRuleModalOpen,passiveModal:!0,onRequestClose:this.closeRuleModal},s.a.createElement("iframe",{id:"ruleWizardFrame",name:"rulesWindow",className:"rule-wizard-frame"})),s.a.createElement(Qe,{data:this.state.metaData,typeLabel:this.type,deleteEntry:this.props.deleteEntry,purgeData:this.purgeData,reload:this.reload}),this.state.loaded?s.a.createElement(bt,{tableChanged:this.tableChanged,data:this.state.tableData,headers:this.headers[this.type],type:this.type,addItem:this.clickAddItem,bulkAddItem:this.clickBulkAddItem,importItems:this.clickImportItems,exportItems:this.exportItems,deleteItem:this.clickDeleteItem,searchText:this.state.searchText,expandable:["map_of_sets","table"].includes(this.type),extendableHeaders:this.headers[this.type+"Inner"],addInnerItem:this.clickAddInnerItem,deleteInnerItem:this.clickDeleteInnerItem,innerSearchText:this.state.innerSearchText}):s.a.createElement(vt.a,{rowCount:Math.min(10,this.props.size+1||1),columnCount:this.headers[this.type].length}),s.a.createElement("div",{className:"separator"}),s.a.createElement(_t,{dependents:this.state.dependents,loaded:this.state.dependentsLoaded,editRule:this.showEditRuleModal}))}}]),t}(l.Component),Rt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e,"set"))).importItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onloadend=function(){var e=n.result,r={bulkAddSeparator:t.bulkAddSeparator,bulkAddData:{value:e}};a.bulkAddItems(r)},n.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.exportItems=function(){return a.download(a.props.name,a.state.allEntries)},a.addItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.value.value){e.next=3;break}return a.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return a.props.displayLoadingModal(!0),e.next=6,a.defaultEntryComment();case 6:return n=e.sent,r={value:t.value.value,source:t.source.value||n},e.next=10,ne(a.props.type,a.props.name,r);case 10:(l=e.sent).error?a.props.showError(l.message):l.number_of_elements>a.state.tableData.length&&(s=a.updateData(a.state.allEntries,r,!0),a.tableChanged("new",s),a.updateMetaData(l)),a.props.displayLoadingModal(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,c,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),r=a.state.allEntries,l=!0,s=!1,o=void 0,e.prev=7,u=t[Symbol.iterator]();case 9:if(l=(i=u.next()).done){e.next=19;break}return c=i.value,d=c.id,e.next=14,le(a.props.type,a.props.name,d);case 14:n=e.sent,r=a.updateData(r,{value:d},!1);case 16:l=!0,e.next=9;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),s=!0,o=e.t0;case 25:e.prev=25,e.prev=26,l||null==u.return||u.return();case 28:if(e.prev=28,!s){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:n.error||n.number_of_elements>=a.state.tableData.length?a.props.showError(n.message||"Unspecified error while trying to delete value"):(a.tableChanged("new",r),a.updateMetaData(n)),a.props.displayLoadingModal(!1);case 35:case"end":return e.stop()}}),e,null,[[7,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),a.bulkAddItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.displayLoadingModal(!0),n=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddSeparator.value).split(t.bulkAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),n=Object(i.a)(new Set(n)),r=n.map((function(e){return{value:e,id:e,source:"reference data api"}})),e.next=6,pe(a.props.type,a.props.name,n);case 6:(l=e.sent).error?a.props.showError(l.message):(o=a.state.allEntries,(s=o).push.apply(s,Object(i.a)(r)),o=o.filter((function(e,t,a){return t===a.findIndex((function(t){return t.value===e.value}))})),a.tableChanged("new",o),a.updateMetaData(l)),a.props.displayLoadingModal(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateData=function(e,t,a){var n=e;a?-1===n.findIndex((function(e){return t.value===e.value}))&&n.push({value:t.value,id:t.value,source:t.source}):n=n.filter((function(e){return e.value!==t.value}));return n},a.parseResponseData=function(e){var t=[];return e.number_of_elements>0&&e.data.forEach((function(e){void 0!==e.value&&(e.id=e.value,t.push(e))})),t},a.testValue=function(e,t,a){if(!e.value)return!1;return a?e.value.match(t):e.value.toLowerCase().includes(t.toLowerCase())},a}return Object(v.a)(t,e),t}(Lt),Vt=a(36),Nt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e,"map"))).importItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onloadend=function(){var e=n.result,r={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};a.bulkAddItems(r)},n.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.exportItems=function(){return a.download(a.props.name,a.state.allEntries,!0)},a.addItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.value.value&&t.key.value){e.next=3;break}return a.props.showError("Cannot add an empty value"),e.abrupt("return");case 3:return a.props.displayLoadingModal(!0),e.next=6,a.defaultEntryComment();case 6:return n=e.sent,r={key:t.key.value,value:t.value.value,source:t.source.value||n},e.next=10,ne(a.props.type,a.props.name,r);case 10:l=e.sent,s=a.updateData(a.state.allEntries,r,!0),l.error?a.props.showError(l.message):(a.tableChanged("new",s),a.updateMetaData(l)),a.props.displayLoadingModal(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),r=a.state.allEntries,l=!0,s=!1,o=void 0,e.prev=7,u=p.a.mark((function e(){var t,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,l=t.id,s=r.findIndex((function(e){return e.key===l})),e.next=5,le(a.props.type,a.props.name,l,{value:r[s].value});case 5:n=e.sent,r=a.updateData(r,{key:l},!1);case 7:case"end":return e.stop()}}),e)})),i=t[Symbol.iterator]();case 10:if(l=(c=i.next()).done){e.next=15;break}return e.delegateYield(u(),"t0",12);case 12:l=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,o=e.t1;case 21:e.prev=21,e.prev=22,l||null==i.return||i.return();case 24:if(e.prev=24,!s){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:n.error?a.props.showError(n.message):(a.tableChanged("new",r),a.updateMetaData(n)),a.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,null,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),a.bulkAddItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,d,m,f,h,b,y,v,k,g,w;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a.props.displayLoadingModal(!0),n=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=[],l={},s=!0,o=!1,u=void 0,e.prev=7,d=n[Symbol.iterator]();!(s=(m=d.next()).done);s=!0)f=m.value,h=f.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),b=Object(c.a)(h,2),y=b[0],v=b[1],l[y]=v,r.push({key:y,value:v,id:y,source:"reference data api"});e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),o=!0,u=e.t0;case 15:e.prev=15,e.prev=16,s||null==d.return||d.return();case 18:if(e.prev=18,!o){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return r=r.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),e.next=26,pe(a.props.type,a.props.name,l);case 26:(k=e.sent).error?a.props.showError(k.message):(w=a.state.allEntries,(g=w).push.apply(g,Object(i.a)(r)),w=w.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse(),a.tableChanged("new",w),a.updateMetaData(k)),a.props.displayLoadingModal(!1);case 29:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})));return function(t){return e.apply(this,arguments)}}(),a.updateData=function(e,t,a){var n=e;return a?n.push({key:t.key,value:t.value,id:t.key,source:t.source}):n=n.filter((function(e){return e.key!==t.key})),n=n.reverse().filter((function(e,t,a){return t===a.findIndex((function(t){return t.key===e.key}))})).reverse()},a.parseResponseData=function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)void 0!==a&&t.push(Object(Vt.a)({key:a},e.data[a],{id:a}));return t}},a.testValue=function(e,t,a){if(!e.value||!e.key)return!1;return a?e.value.match(t)||e.key.match(t):e.value.toLowerCase().includes(t.toLowerCase())||e.key.toLowerCase().includes(t.toLowerCase())},a}return Object(v.a)(t,e),t}(Lt),Kt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e,"map_of_sets"))).importItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onloadend=function(){var e=n.result,r={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddValuesSeparator:t.bulkAddValuesSeparator,bulkAddData:{value:e}};a.bulkAddItems(r)},n.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.exportItems=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var l,s=a.state.allEntries[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var o=l.value;e.push.apply(e,Object(i.a)(o.values))}}catch(u){n=!0,r=u}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}a.download(a.props.name,e,!0,!1)},a.addItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keyAddDataValues.value.replace(/\r?\n/g,t.keyAddSeparator.value).split(t.keyAddSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r=t.keyAddDataKey.value,l=Object(E.a)({},r,n),e.next=5,pe(a.props.type,a.props.name,l);case 5:(s=e.sent)&&(o=a.updateData(a.state.allEntries,{key:r,values:n,source:"reference data api"},!0,!0),a.tableChanged("new",o),a.updateMetaData(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),r=a.state.tableData,l=!0,s=!1,o=void 0,e.prev=7,u=p.a.mark((function e(){var t,l,s,o,u,i,d,m,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.value,l=t.id,s=r.findIndex((function(e){return e.key===l})),o=!0,u=!1,i=void 0,e.prev=6,d=r[s].values[Symbol.iterator]();case 8:if(o=(m=d.next()).done){e.next=17;break}return f=m.value,e.next=12,le(a.props.type,a.props.name,l,{value:f.value});case 12:n=e.sent,r=a.updateData(r,{key:l},!1,!0);case 14:o=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),u=!0,i=e.t0;case 23:e.prev=23,e.prev=24,o||null==d.return||d.return();case 26:if(e.prev=26,!u){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[6,19,23,31],[24,,26,30]])})),i=t[Symbol.iterator]();case 10:if(l=(c=i.next()).done){e.next=15;break}return e.delegateYield(u(),"t0",12);case 12:l=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,o=e.t1;case 21:e.prev=21,e.prev=22,l||null==i.return||i.return();case 24:if(e.prev=24,!s){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:n.error?a.props.showError(n.message):(a.tableChanged("new",r),a.updateMetaData(n)),a.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,null,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),a.addInnerItem=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var r,l,s,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.defaultEntryComment();case 2:if(r=e.sent,l={value:n.value.value,key:t.key,source:n.source.value||r},s=a.state.allEntries.findIndex((function(e){return e.key===t.key})),-1===a.state.allEntries[s].values.findIndex((function(e){return e.value===n.value.value}))){e.next=9;break}return console.log("Value already in table. Skipping"),a.props.showError("Value already in table."),e.abrupt("return");case 9:return a.props.displayLoadingModal(!0),e.next=12,ne(a.props.type,a.props.name,l);case 12:o=e.sent,u=a.updateData(a.state.allEntries,l,!0),o.error?a.props.showError(o.message):(a.tableChanged("new",u),a.updateMetaData(o)),a.props.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.deleteInnerItem=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var r,l,s,o,u,i,c,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),l=a.state.allEntries,s=!0,o=!1,u=void 0,e.prev=7,i=n[Symbol.iterator]();case 9:if(s=(c=i.next()).done){e.next=19;break}return d=c.value,m=d.id,e.next=14,le(a.props.type,a.props.name,t,{value:m});case 14:r=e.sent,l=a.updateData(l,{key:t,value:m},!1);case 16:s=!0,e.next=9;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),o=!0,u=e.t0;case 25:e.prev=25,e.prev=26,s||null==i.return||i.return();case 28:if(e.prev=28,!o){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r.error?a.props.showError(r.message):(a.tableChanged("new",l),a.updateMetaData(r)),a.props.displayLoadingModal(!1);case 35:case"end":return e.stop()}}),e,null,[[7,21,25,33],[26,,28,32]])})));return function(t,a){return e.apply(this,arguments)}}(),a.updateData=function(e,t,a,n){if(n)if(a){var r=e.findIndex((function(e){return e.key===t.key}));if(-1===r){var l=Object(i.a)(new Set(t.values));l=l.map((function(e){return{value:e,id:e,key:t.key,source:t.source}})),e.push({key:t.key,values:l,id:t.key})}else{var s=!0,o=!1,u=void 0;try{for(var c,d=function(){var a=c.value;-1===e[r].values.findIndex((function(e){return e.value===a}))&&e[r].values.push({value:a,id:a,key:t.key,source:t.source})},p=t.values[Symbol.iterator]();!(s=(c=p.next()).done);s=!0)d()}catch(f){o=!0,u=f}finally{try{s||null==p.return||p.return()}finally{if(o)throw u}}}}else e=e.filter((function(e){return e.key!==t.key}));else{var m=e.findIndex((function(e){return e.key===t.key}));-1===m?console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key"):a?e[m].values.push({value:t.value,id:t.value,key:t.key,source:t.source}):e[m].values=e[m].values.filter((function(e){return e.value!==t.value}))}return e},a.parseResponseData=function(e){var t=[];if(e.number_of_elements>0){var a=function(t){e.data[t]=e.data[t].map((function(e){return Object(Vt.a)({key:t,id:e.value},e)}))};for(var n in e.data)a(n);t=Object.keys(e.data).map((function(t){return{key:t,values:e.data[t],valueLabel:e.value_label,id:t}}))}return t},a.bulkAddItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,d,m,f,h,b,y;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a.props.displayLoadingModal(!0),n=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},l=!0,s=!1,o=void 0,e.prev=6,u=n[Symbol.iterator]();!(l=(i=u.next()).done);l=!0)d=i.value,m=d.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),f=Object(c.a)(m,2),h=f[0],b=f[1],r.hasOwnProperty(h)||(r[h]={}),r[h]=b.split(t.bulkAddValuesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e}));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,o=e.t0;case 14:e.prev=14,e.prev=15,l||null==u.return||u.return();case 17:if(e.prev=17,!s){e.next=20;break}throw o;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,pe(a.props.type,a.props.name,r);case 24:(y=e.sent).error?a.props.showError(y.message):a.updateMetaData(y),a.loadData(a.props.type,!0),a.props.displayLoadingModal(!1);case 28:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}(),a.testValue=function(e,t,a){if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var n=!0,r=!1,l=void 0;try{for(var s,o=e.values[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;if(a?u.value.match(t):u.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(i){r=!0,l=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return!1},a}return Object(v.a)(t,e),t}(Lt),zt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e,"table"))).importItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onloadend=function(){var e=n.result,r={bulkAddEntriesSeparator:t.bulkAddEntriesSeparator,bulkAddKeyValueSeparator:t.bulkAddKeyValueSeparator,bulkAddData:{value:e}};a.bulkAddItems(r)},n.readAsText(t.file.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.exportItems=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var l,s=a.state.allEntries[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var o=l.value;e.push.apply(e,Object(i.a)(o.values))}}catch(u){n=!0,r=u}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}a.download(a.props.name,e,!0,!0)},a.clickAddItem=function(){var e={};if(a.state.metaData)for(var t in a.state.metaData.key_name_types)e[t]={label:t,value:"",type:"text",element_type:a.state.metaData.key_name_types[t]};var n=Object(Vt.a)({outer_key:{label:a.state.metaData.key_label||"Key",value:"",type:"text"}},e,{source:{label:"Comment",value:"",type:"text",help:"Optional: A comment to add to the new data entry"}});a.setState({showInputModal:!0,modalSave:a.addItem,modalInputDefinition:n})},a.addItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.displayLoadingModal(!0),r=a.state.allEntries,l=t.outer_key.value,s=t.source.value,r=a.updateData(r,{outer_key:l,values:[]},!0,!0),a.tableChanged("new",r),delete t.outer_key,delete t.source,e.t0=p.a.keys(t);case 9:if((e.t1=e.t0()).done){e.next=18;break}if(o=e.t1.value,t[o].value){e.next=13;break}return e.abrupt("continue",9);case 13:return e.next=15,a.addInnerItem({key:l},{key:{value:o},value:{value:t[o].value},source:{value:s}},!0);case 15:n=e.sent,e.next=9;break;case 18:a.updateMetaData(n),a.props.displayLoadingModal(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteItem=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),r=a.state.allEntries,l=!0,s=!1,o=void 0,e.prev=7,u=p.a.mark((function e(){var t,l,s,o,u,i,d,m,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.value,l=t.id,s=r.findIndex((function(e){return e.key===l})),o=!0,u=!1,i=void 0,e.prev=6,d=r[s].values[Symbol.iterator]();case 8:if(o=(m=d.next()).done){e.next=17;break}return f=m.value,e.next=12,ce(a.props.type,a.props.name,l,f.key,{value:f.value});case 12:(n=e.sent).error?a.props.showError(n.message):r=a.updateData(r,{outer_key:l},!1,!0);case 14:o=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),u=!0,i=e.t0;case 23:e.prev=23,e.prev=24,o||null==d.return||d.return();case 26:if(e.prev=26,!u){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[6,19,23,31],[24,,26,30]])})),i=t[Symbol.iterator]();case 10:if(l=(c=i.next()).done){e.next=15;break}return e.delegateYield(u(),"t0",12);case 12:l=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),s=!0,o=e.t1;case 21:e.prev=21,e.prev=22,l||null==i.return||i.return();case 24:if(e.prev=24,!s){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:n.error?a.props.showError(n.message):(a.tableChanged("new",r),a.updateMetaData(n)),a.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,null,[[7,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),a.addInnerItem=function(){var e=Object(m.a)(p.a.mark((function e(t,n,r){var l,s,o,u,i,c,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||a.props.displayLoadingModal(!0),l=t.key,s=n.key.value,o=n.value.value,e.next=6,a.defaultEntryComment();case 6:return u=e.sent,i=n.source.value||u,e.next=10,ne(a.props.type,a.props.name,{outer_key:l,inner_key:s,value:o,source:i});case 10:if(c=e.sent,d=a.updateData(a.state.allEntries,{outer_key:l,inner_key:s,value:o,source:i},!0),c.error?a.props.showError(c.message):(a.updateMetaData(c),a.tableChanged("new",d)),!r){e.next=15;break}return e.abrupt("return",c);case 15:a.props.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.deleteInnerItem=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var r,l,s,o,u,i,c,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.length){e.next=2;break}return e.abrupt("return");case 2:a.props.displayLoadingModal(!0),l=a.state.allEntries,s=!0,o=!1,u=void 0,e.prev=7,i=p.a.mark((function e(){var n,s,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.value,s=n.id,o=l.findIndex((function(e){return e.key===t})),u=l[o].values.findIndex((function(e){return e.key===s})),e.next=6,ce(a.props.type,a.props.name,t,s,{value:l[o].values[u].value});case 6:r=e.sent,l=a.updateData(l,{outer_key:t,inner_key:s},!1,!1);case 8:case"end":return e.stop()}}),e)})),c=n[Symbol.iterator]();case 10:if(s=(d=c.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",12);case 12:s=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),o=!0,u=e.t1;case 21:e.prev=21,e.prev=22,s||null==c.return||c.return();case 24:if(e.prev=24,!o){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(21);case 29:r.error?a.props.showError(r.message):(a.tableChanged("new",l),a.updateMetaData(r)),a.props.displayLoadingModal(!1);case 31:case"end":return e.stop()}}),e,null,[[7,17,21,29],[22,,24,28]])})));return function(t,a){return e.apply(this,arguments)}}(),a.updateData=function(e,t,a,n){if(n)if(a){if(-1!==e.findIndex((function(e){return e.key===t.outer_key})))return;e.push({key:t.outer_key,values:t.values,id:t.outer_key})}else e=e.filter((function(e){return e.key!==t.outer_key}));else{var r=e.findIndex((function(e){return e.key===t.outer_key}));if(-1===r)console.log("Something went wrong, couldn't find index of outer key in table when trying to delete inner key");else{var l=e[r].values.findIndex((function(e){return e.key===t.inner_key}));a?-1===l?e[r].values.push({outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}):e[l].values[l]={outer_key:t.outer_key,key:t.inner_key,value:t.value,id:t.inner_key,source:t.source}:e[r].values.splice(l,1)}}return e},a.parseResponseData=function(e){var t=[];if(e.number_of_elements>0){for(var a in e.data)for(var n in e.data[a])e.data[a][n]=Object(Vt.a)({outer_key:a,key:n,id:n},e.data[a][n]);t=Object.keys(e.data).map((function(t){return{key:t,values:Object.values(e.data[t]),id:t}}))}return t},a.bulkAddItems=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,l,s,o,u,i,d,m,f,h,b,y,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a.props.displayLoadingModal(!0),n=t.bulkAddData.value.replace(/\r?\n/g,t.bulkAddEntriesSeparator.value).split(t.bulkAddEntriesSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),r={},l=!0,s=!1,o=void 0,e.prev=6,u=n[Symbol.iterator]();!(l=(i=u.next()).done);l=!0)d=i.value,m=d.split(t.bulkAddKeyValueSeparator.value).map((function(e){return e.trim()})).filter((function(e){return e})),f=Object(c.a)(m,3),h=f[0],b=f[1],y=f[2],r.hasOwnProperty(h)||(r[h]={}),r[h][b]=y;e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,o=e.t0;case 14:e.prev=14,e.prev=15,l||null==u.return||u.return();case 17:if(e.prev=17,!s){e.next=20;break}throw o;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,pe(a.props.type,a.props.name,r);case 24:(v=e.sent).error?a.props.showError(v.message):a.updateMetaData(v),a.loadData(a.props.type,!0),a.props.displayLoadingModal(!1);case 28:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}(),a.testValue=function(e,t,a){try{if(a?e.key.match(t):e.key.toLowerCase().includes(t.toLowerCase()))return!0;var n=!0,r=!1,l=void 0;try{for(var s,o=e.values[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;if(a?u.value.match(t):u.value.toLowerCase().includes(t.toLowerCase()))return!0}}catch(i){r=!0,l=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}}catch(Jt){return!1}return!1},a}return Object(v.a)(t,e),t}(Lt),Ft=a(220),Pt=a(221),Bt=a(225),Ht=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).state={type:a.props.type,entries:JSON.parse(JSON.stringify(n[a.props.type]))},a.typeLookup={tables:"Table",map_of_sets:"Map of Sets",sets:"Set",maps:"Map"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.state.type!==this.props.type&&this.setState({type:this.props.type,entries:JSON.parse(JSON.stringify(n[this.props.type]))})}},{key:"handleChange",value:function(e,t){var a=this.state.entries;a[t].value=e.target.value,this.setState({entries:a})}},{key:"handleDropdownChange",value:function(e,t){var a=this.state.entries;a[t].value=e.selectedItem,this.setState({entries:a})}},{key:"render",value:function(){var e=this;return s.a.createElement(Ft.a,null,s.a.createElement(Pt.a,{legendText:M.t("data.new.title",{type:this.typeLookup[this.state.type]})}),Object.keys(this.state.entries).map((function(t){var a;switch(e.state.entries[t].type){case"select":a=s.a.createElement(Bt.a,{selectedItem:e.state.entries[t].value,onChange:function(a){return e.handleDropdownChange(a,t)},items:e.state.entries[t].options});break;case"list":a=s.a.createElement(qt,{options:e.state.entries[t].options,label:e.state.entries[t].label,values:e.state.entries[t].values});break;case"date":a=s.a.createElement(Ut,{options:e.state.entries[t].options,label:e.state.entries[t].label,setValue:function(a){return e.state.entries[t].value=a}});break;default:a=s.a.createElement(Tt.a,{id:t,value:e.state.entries[t].value,onChange:function(a){return e.handleChange(a,t)}})}return s.a.createElement(Pt.a,{key:t},e.state.entries[t].help?s.a.createElement(Ot.a,{direction:"right",triggerText:e.state.entries[t].label},e.state.entries[t].help):s.a.createElement(Dt.a,null,e.state.entries[t].label),a)})),s.a.createElement(O.a,{kind:"primary",size:"small",onClick:function(){return e.props.save(e.state.entries)}},M.t("data.new.create")))}}]),t}(l.Component),qt=function(e){function t(e){var a;Object(f.a)(this,t),a=Object(b.a)(this,Object(y.a)(t).call(this,e));var n={};return Object.keys(a.props.values).forEach((function(e){n[e]=a.props.values[e]})),a.state={entries:n,nextKeyValue:2},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e,t,a){var n=this.state.entries;n[t][a]=e.target.value||e.target.text,this.setState({entries:n}),this.props.values[t][a]=e.target.value}},{key:"handleDropdownChange",value:function(e,t,a){var n=this.state.entries;n[t][a]=e.selectedItem,this.setState({entries:n}),this.props.values[t][a]=e.selectedItem}},{key:"addInnerKey",value:function(e){var t="Inner Key "+this.state.nextKeyValue,a=this.state.entries;a[t]={label:t,type:"ALN"},this.setState({entries:a,nextKeyValue:this.state.nextKeyValue+1}),this.props.values[t]={label:t,type:"ALN"}}},{key:"removeInnerKey",value:function(e){var t=this.state.entries;delete t[e],this.setState({entries:t}),delete this.props.values[e]}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},Object.keys(this.state.entries).map((function(t){return s.a.createElement("div",{className:"input-group",key:t},s.a.createElement(Bt.a,{items:e.props.options,selectedItem:e.state.entries[t].type,onChange:function(a){return e.handleDropdownChange(a,t,"type")}}),s.a.createElement(Tt.a,{key:t,value:e.state.entries[t].label,onChange:function(a){return e.handleChange(a,t,"label")}}),s.a.createElement(O.a,{kind:"danger",size:"small",hasIconOnly:!0,renderIcon:Je.a,iconDescription:"Delete",tooltipPosition:"bottom",className:"delete-inner-key",onClick:function(a){return e.removeInnerKey(t)}}))})),s.a.createElement(O.a,{kind:"tertiary",size:"small",onClick:function(t){return e.addInnerKey(t)}},M.t("data.new.add.key.inner")))}}]),t}(l.Component),Ut=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).state={label:"",type:"days"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t="";e.target.value&&(t=e.target.value+" "+this.state.type),this.setState({label:e.target.value}),this.props.setValue(t)}},{key:"handleDropdownChange",value:function(e){var t=this.state.label+" "+e.selectedItem;this.setState({type:e.selectedItem}),this.props.setValue(t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inner-keys"},s.a.createElement("div",{className:"input-group"},s.a.createElement(Tt.a,{value:this.state.label,onChange:function(t){return e.handleChange(t)}}),s.a.createElement(Bt.a,{selectedItem:this.state.type,onChange:function(t){return e.handleDropdownChange(t)},items:this.props.options})))}}]),t}(l.Component),Wt=Ht,Gt=function(e){function t(e){var a;Object(f.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).menuItemClicked=function(e,t){e&&e.stopPropagation(),a.updateHash("view/"+t.key),a.setState({updated:!0})},a.createEntry=function(e,t){e.stopPropagation(),a.updateHash("create/"+t),a.setState({updated:!0})},a.entryCreated=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var r,l,s,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.displayLoadingModal(!0),r={},t.inner_labels&&(r.outer_key_label=t.key_label.value,l=[],Object.keys(t.inner_labels.values).forEach((function(e){l.push({key_name:t.inner_labels.values[e].label,element_type:t.inner_labels.values[e].type})})),r.key_name_types=JSON.stringify(l)),e.t0=p.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=11;break}if("key_label"!==(s=e.t1.value)&&"inner_labels"!==s){e.next=8;break}return e.abrupt("continue",4);case 8:r[s]=t[s].value,e.next=4;break;case 11:return e.next=13,Y(n,r);case 13:(o=e.sent).error?a.showError(o.message):(u=n+"/"+o.name,a.state.refData[n].nodes[o.name]={label:o.name,size:0,datatype:n,key:u},a.menuItemClicked(void 0,{key:u})),a.displayLoadingModal(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.deleteEntry=Object(m.a)(p.a.mark((function e(){var t,n,r,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this entry")){e.next=9;break}return a.displayLoadingModal(!0),t=a.parseHash(),n=Object(c.a)(t,4),n[0],n[1],r=n[2],l=n[3],s=function(e){e.error?a.showError(e.message):(a.updateHash(""),delete a.state.refData[r].nodes[l],a.setState({updated:!0})),a.displayLoadingModal(!1)},e.next=7,ue(r,l,s);case 7:e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e)}))),a.showError=function(e){var t=a.state.errorMessages;e||(e="An unspecified error occured"),e=Array.isArray(e)?e:[e],t.push.apply(t,Object(i.a)(e)),a.setState({errorMessages:t})},a.getRefData=Object(m.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state.refData,n=p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(n);case 2:if(!(r=e.sent).error){e.next=6;break}return a.showError("Unable to load "+t[n].label),e.abrupt("return","continue");case 6:t[n].nodes={},t[n].size=r.length,t[n].datatype=n.replace(/_/g," "),r.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})),r.forEach((function(e){t[n].nodes[e.name]={label:e.name,size:e.number_of_elements,datatype:n,key:n+"/"+e.name}}));case 11:case"end":return e.stop()}}),e)})),e.t0=p.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,e.delegateYield(n(r),"t2",6);case 6:if("continue"!==e.t2){e.next=9;break}return e.abrupt("continue",3);case 9:e.next=3;break;case 11:a.setState({refData:t});case 12:case"end":return e.stop()}}),e)}))),a.parseHash=function(){var e=decodeURI(window.location.hash.substring("#/data".length)).split("/"),t=Object(c.a)(e,4),a=(t[0],t[1]),n=t[2],r=t[3];return[n+"/"+r,a,n,r]},a.updateHash=function(e){return window.location.hash="/data/"+e},a.displayLoadingModal=function(e){return a.setState({loading:e})},a.refDataMapping={maps:Nt,sets:Rt,map_of_sets:Kt,tables:zt};var n={sets:{key:"sets",label:M.t("data.sidebar.type",{type:"Set"}),nodes:{}},maps:{key:"maps",label:M.t("data.sidebar.type",{type:"Map"}),nodes:{}},map_of_sets:{key:"map_of_sets",label:M.t("data.sidebar.type",{type:"Map of Sets"}),nodes:{}},tables:{key:"tables",label:M.t("data.sidebar.type",{type:"Table"}),nodes:{}}};return a.state={refData:n,errorMessages:[],loading:!1},a.getRefData(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t="",a="",n="",r="";if(window.location.hash.includes("#/data/")){var l=this.parseHash(),o=Object(c.a)(l,4);a=o[0],n=o[1],t=o[2],r=o[3]}var u=this.refDataMapping[t];return s.a.createElement(x.a,{secondaryInitialSize:84,percentage:!0},s.a.createElement(L,{menuItemAction:this.menuItemClicked,showError:this.showError,createEntry:this.createEntry,refData:this.state.refData}),s.a.createElement("div",{id:"content"},s.a.createElement(k.a,{active:this.state.loading,withOverlay:!0}),this.state.errorMessages.length>0&&s.a.createElement(g.a,{kind:"error",className:"error-alert",onCloseButtonClick:function(t){e.setState({errorMessages:[]})},title:"Error"},this.state.errorMessages.map((function(e){return s.a.createElement("span",{key:e,className:"error-alert-message"},e,s.a.createElement("br",null))}))),"create"===n?s.a.createElement(Wt,{type:t,save:function(a){return e.entryCreated(a,t)}}):u&&s.a.createElement(u,{key:a,api:a,name:r,type:t,deleteEntry:this.deleteEntry,dataUpdated:this.getRefData,displayLoadingModal:this.displayLoadingModal,showError:this.showError})))}}]),t}(l.Component);a(198);u.a.render(s.a.createElement(Gt,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.2dec25d1.chunk.js.map